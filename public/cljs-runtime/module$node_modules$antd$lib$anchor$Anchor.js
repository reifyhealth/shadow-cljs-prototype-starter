shadow$provide.module$node_modules$antd$lib$anchor$Anchor=function(global,require,module,exports){function getDefaultContainer(){return window}function getOffsetTop(element,container){if(!element.getClientRects().length)return 0;var rect=element.getBoundingClientRect();return rect.width||rect.height?container===window?(container=element.ownerDocument.documentElement,rect.top-container.clientTop):rect.top-container.getBoundingClientRect().top:rect.top}module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");
global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),
_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=global(require("module$node_modules$$babel$runtime$helpers$createSuper")),React=module(require("module$node_modules$react$index")),_classnames=global(require("module$node_modules$classnames$index")),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener")),_affix=global(require("module$node_modules$antd$lib$affix$index"));
module=require("module$node_modules$antd$lib$config_provider$index");var _scrollTo=global(require("module$node_modules$antd$lib$_util$scrollTo")),_getScroll=global(require("module$node_modules$antd$lib$_util$getScroll")),_context=global(require("module$node_modules$antd$lib$anchor$context")),sharpMatcherRegx=/#(\S+)$/;require=function(_React$Component){function Anchor(){(0,_classCallCheck2["default"])(this,Anchor);var _this=_super.apply(this,arguments);_this.state={activeLink:null};_this.wrapperRef=
React.createRef();_this.links=[];_this.registerLink=function(link){_this.links.includes(link)||_this.links.push(link)};_this.unregisterLink=function(link){link=_this.links.indexOf(link);-1!==link&&_this.links.splice(link,1)};_this.getContainer=function(){var getTargetContainer=_this.context.getTargetContainer;return(_this.props.getContainer||getTargetContainer||getDefaultContainer)()};_this.handleScrollTo=function(link){var _this$props=_this.props,offsetTop=_this$props.offsetTop;_this$props=_this$props.targetOffset;
_this.setCurrentActiveLink(link);var container=_this.getContainer(),scrollTop=(0,_getScroll["default"])(container,!0);if(link=sharpMatcherRegx.exec(link))if(link=document.getElementById(link[1]))container=getOffsetTop(link,container),offsetTop=scrollTop+container-(void 0!==_this$props?_this$props:offsetTop||0),_this.animating=!0,(0,_scrollTo["default"])(offsetTop,{callback:function(){_this.animating=!1},getContainer:_this.getContainer})};_this.saveInkNode=function(node){_this.inkNode=node};_this.setCurrentActiveLink=
function(link){var onChange=_this.props.onChange;_this.state.activeLink!==link&&(_this.setState({activeLink:link}),null===onChange||void 0===onChange?void 0:onChange(link))};_this.handleScroll=function(){if(!_this.animating){var _this$props2=_this.props,offsetTop=_this$props2.offsetTop,targetOffset=_this$props2.targetOffset;_this$props2=_this.getCurrentAnchor(void 0!==targetOffset?targetOffset:offsetTop||0,_this$props2.bounds);_this.setCurrentActiveLink(_this$props2)}};_this.updateInk=function(){var _assertThisInitialize=
(0,_assertThisInitialized2["default"])(_this),prefixCls=_assertThisInitialize.prefixCls;_assertThisInitialize=_assertThisInitialize.wrapperRef.current;if(prefixCls=null===_assertThisInitialize||void 0===_assertThisInitialize?void 0:_assertThisInitialize.getElementsByClassName("".concat(prefixCls,"-link-title-active"))[0])_this.inkNode.style.top="".concat(prefixCls.offsetTop+prefixCls.clientHeight/2-4.5,"px")};_this.render=function(){var _this$context=_this.context,getPrefixCls=_this$context.getPrefixCls,
direction=_this$context.direction,_this$props3=_this.props;_this$context=_this$props3.className;var className=void 0===_this$context?"":_this$context,style=_this$props3.style;_this$context=_this$props3.offsetTop;var affix=_this$props3.affix,showInkInFixed=_this$props3.showInkInFixed,children=_this$props3.children,activeLink=_this.state.activeLink;getPrefixCls=getPrefixCls("anchor",_this$props3.prefixCls);_this.prefixCls=getPrefixCls;_this$props3=(0,_classnames["default"])("".concat(getPrefixCls,"-ink-ball"),
{visible:activeLink});direction=(0,_classnames["default"])("".concat(getPrefixCls,"-wrapper"),(0,_defineProperty2["default"])({},"".concat(getPrefixCls,"-rtl"),"rtl"===direction),className);showInkInFixed=(0,_classnames["default"])(getPrefixCls,{fixed:!affix&&!showInkInFixed});style=(0,_extends2["default"])({maxHeight:_this$context?"calc(100vh - ".concat(_this$context,"px)"):"100vh"},style);children=React.createElement("div",{ref:_this.wrapperRef,className:direction,style:style},React.createElement("div",
{className:showInkInFixed},React.createElement("div",{className:"".concat(getPrefixCls,"-ink")},React.createElement("span",{className:_this$props3,ref:_this.saveInkNode})),children));return React.createElement(_context["default"].Provider,{value:{registerLink:_this.registerLink,unregisterLink:_this.unregisterLink,activeLink:_this.state.activeLink,scrollTo:_this.handleScrollTo,onClick:_this.props.onClick}},affix?React.createElement(_affix["default"],{offsetTop:_this$context,target:_this.getContainer},
children):children)};return _this}(0,_inherits2["default"])(Anchor,_React$Component);var _super=(0,_createSuper2["default"])(Anchor);(0,_createClass2["default"])(Anchor,[{key:"componentDidMount",value:function(){this.scrollContainer=this.getContainer();this.scrollEvent=(0,_addEventListener["default"])(this.scrollContainer,"scroll",this.handleScroll);this.handleScroll()}},{key:"componentDidUpdate",value:function(){if(this.scrollEvent){var currentContainer=this.getContainer();this.scrollContainer!==
currentContainer&&(this.scrollContainer=currentContainer,this.scrollEvent.remove(),this.scrollEvent=(0,_addEventListener["default"])(this.scrollContainer,"scroll",this.handleScroll),this.handleScroll())}this.updateInk()}},{key:"componentWillUnmount",value:function(){this.scrollEvent&&this.scrollEvent.remove()}},{key:"getCurrentAnchor",value:function(){var offsetTop=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,bounds=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,getCurrentAnchor=
this.props.getCurrentAnchor;if("function"===typeof getCurrentAnchor)return getCurrentAnchor();var linkSections=[],container=this.getContainer();this.links.forEach(function(link){var sharpLinkMatch=sharpMatcherRegx.exec(link.toString());sharpLinkMatch&&(sharpLinkMatch=document.getElementById(sharpLinkMatch[1]))&&(sharpLinkMatch=getOffsetTop(sharpLinkMatch,container),sharpLinkMatch<offsetTop+bounds&&linkSections.push({link:link,top:sharpLinkMatch}))});return linkSections.length?linkSections.reduce(function(prev,
curr){return curr.top>prev.top?curr:prev}).link:""}}]);return Anchor}(React.Component);exports["default"]=require;require.defaultProps={affix:!0,showInkInFixed:!1};require.contextType=module.ConfigContext}
//# sourceMappingURL=module$node_modules$antd$lib$anchor$Anchor.js.map
