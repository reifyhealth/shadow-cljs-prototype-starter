shadow$provide.module$node_modules$rc_overflow$lib$Overflow=function(global,require,module,exports){function defaultRenderRest(omittedItems){return"+ ".concat(omittedItems.length," ...")}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),
_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=global(require("module$node_modules$react$index")),_classnames=module(require("module$node_modules$classnames$index")),_rcResizeObserver=module(require("module$node_modules$rc_resize_observer$lib$index")),_Item=module(require("module$node_modules$rc_overflow$lib$Item")),_useBatchFrameState=
require("module$node_modules$rc_overflow$lib$hooks$useBatchFrameState");require=React.forwardRef(function(props,ref){function updateDisplayCount(count,notReady){setDisplayCount(count);notReady||setRestReady(count<data.length-1)}function onOverflowResize(_,element){setContainerWidth(element.clientWidth)}function registerSize(key,width){setItemWidths(function(origin){origin=new Map(origin);null===width?origin.delete(key):origin.set(key,width);return origin})}function registerOverflowSize(_,width){setRestWidth(width);
setPrevRestWidth(restWidth)}function registerSuffixSize(_,width){setSuffixWidth(width)}var _props$prefixCls=props.prefixCls;_props$prefixCls=void 0===_props$prefixCls?"rc-overflow":_props$prefixCls;var _props$data=props.data,data=void 0===_props$data?[]:_props$data,renderItem=props.renderItem,itemKey=props.itemKey;_props$data=props.itemWidth;var itemWidth=void 0===_props$data?10:_props$data;_props$data=props.style;var className=props.className,maxCount=props.maxCount,_props$renderRest=props.renderRest;
_props$renderRest=void 0===_props$renderRest?defaultRenderRest:_props$renderRest;var renderItemProps=props.renderItemProps,suffix=props.suffix,_props$component=props.component;_props$component=void 0===_props$component?"div":_props$component;var _props$itemComponent=props.itemComponent;_props$itemComponent=void 0===_props$itemComponent?"div":_props$itemComponent;props=(0,_objectWithoutProperties2.default)(props,"prefixCls data renderItem itemKey itemWidth style className maxCount renderRest renderItemProps suffix component itemComponent".split(" "));
var createUseState=(0,_useBatchFrameState.useBatchFrameState)(),_createUseState=createUseState(0);_createUseState=(0,_slicedToArray2.default)(_createUseState,2);var containerWidth=_createUseState[0],setContainerWidth=_createUseState[1];_createUseState=createUseState(new Map);_createUseState=(0,_slicedToArray2.default)(_createUseState,2);var itemWidths=_createUseState[0],setItemWidths=_createUseState[1];_createUseState=createUseState(0);var _createUseState6=(0,_slicedToArray2.default)(_createUseState,
2);_createUseState=_createUseState6[0];var setPrevRestWidth=_createUseState6[1];_createUseState6=createUseState(0);_createUseState6=(0,_slicedToArray2.default)(_createUseState6,2);var restWidth=_createUseState6[0],setRestWidth=_createUseState6[1];createUseState=createUseState(0);createUseState=(0,_slicedToArray2.default)(createUseState,2);var suffixWidth=createUseState[0],setSuffixWidth=createUseState[1];createUseState=(0,React.useState)(null);_createUseState6=(0,_slicedToArray2.default)(createUseState,
2);createUseState=_createUseState6[0];var setSuffixFixedStart=_createUseState6[1];_createUseState6=(0,React.useState)(0);_createUseState6=(0,_slicedToArray2.default)(_createUseState6,2);var displayCount=_createUseState6[0],setDisplayCount=_createUseState6[1];_createUseState6=(0,React.useState)(!1);_createUseState6=(0,_slicedToArray2.default)(_createUseState6,2);var restReady=_createUseState6[0],setRestReady=_createUseState6[1];_createUseState6="".concat(_props$prefixCls,"-item");var mergedRestWidth=
Math.max(_createUseState,restWidth),isResponsive=data.length&&"responsive"===maxCount;_createUseState=isResponsive||"number"===typeof maxCount&&data.length>maxCount;var mergedData=(0,React.useMemo)(function(){var items=data;isResponsive?items=data.slice(0,Math.min(data.length,containerWidth/itemWidth)):"number"===typeof maxCount&&(items=data.slice(0,maxCount));return items},[data,itemWidth,containerWidth,maxCount,isResponsive]),omittedItems=(0,React.useMemo)(function(){return isResponsive?data.slice(displayCount+
1):data.slice(mergedData.length)},[data,mergedData,isResponsive,displayCount]),getKey=(0,React.useCallback)(function(item,index){var _ref;return"function"===typeof itemKey?itemKey(item):null!==(_ref=itemKey&&(null===item||void 0===item?void 0:item[itemKey]))&&void 0!==_ref?_ref:index},[itemKey]),mergedRenderItem=(0,React.useCallback)(renderItem||function(item){return item},[renderItem]);React.useLayoutEffect(function(){if(containerWidth&&mergedRestWidth&&mergedData){var totalWidth=suffixWidth,len=
mergedData.length,lastIndex=len-1;if(len){for(var i=0;i<len;i+=1){var currentItemWidth=itemWidths.get(getKey(mergedData[i],i));if(void 0===currentItemWidth){updateDisplayCount(i-1,!0);break}totalWidth+=currentItemWidth;if(i===lastIndex-1&&totalWidth+itemWidths.get(getKey(mergedData[lastIndex],lastIndex))<=containerWidth){updateDisplayCount(lastIndex);setSuffixFixedStart(null);break}else if(totalWidth+mergedRestWidth>containerWidth){updateDisplayCount(i-1);setSuffixFixedStart(totalWidth-currentItemWidth-
suffixWidth+restWidth);break}else if(i===lastIndex){updateDisplayCount(lastIndex);setSuffixFixedStart(totalWidth-suffixWidth);break}}suffix&&itemWidths.get(getKey(mergedData[0],0))+suffixWidth>containerWidth&&setSuffixFixedStart(null)}else updateDisplayCount(0),setSuffixFixedStart(null)}},[containerWidth,itemWidths,restWidth,suffixWidth,getKey,mergedData]);renderItem=restReady&&!!omittedItems.length;restReady={};null!==createUseState&&isResponsive&&(restReady={position:"absolute",left:createUseState,
top:0});var itemSharedProps={prefixCls:_createUseState6,responsive:isResponsive,component:_props$itemComponent};ref=React.createElement(_props$component,(0,_extends2.default)({className:(0,_classnames.default)(_props$prefixCls,className),style:_props$data,ref:ref},props),mergedData.map(function(item,index){var key=getKey(item,index);return React.createElement(_Item.default,(0,_extends2.default)({},itemSharedProps,{order:index,key:key,item:item,renderItem:mergedRenderItem,itemKey:key,registerSize:registerSize,
display:index<=displayCount},null===renderItemProps||void 0===renderItemProps?void 0:renderItemProps(item)))}),_createUseState?React.createElement(_Item.default,(0,_extends2.default)({},itemSharedProps,{order:renderItem?displayCount:Number.MAX_SAFE_INTEGER,className:"".concat(_createUseState6,"-rest"),registerSize:registerOverflowSize,display:renderItem}),"function"===typeof _props$renderRest?_props$renderRest(omittedItems):_props$renderRest):null,suffix&&React.createElement(_Item.default,(0,_extends2.default)({},
itemSharedProps,{order:displayCount,className:"".concat(_createUseState6,"-suffix"),registerSize:registerSuffixSize,display:!0,style:restReady}),suffix));isResponsive&&(ref=React.createElement(_rcResizeObserver.default,{onResize:onOverflowResize},ref));return ref});require.displayName="Overflow";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_overflow$lib$Overflow.js.map
