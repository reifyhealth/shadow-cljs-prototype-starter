shadow$provide.module$node_modules$rc_image$lib$Image=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_typeof2=module(require("module$node_modules$$babel$runtime$helpers$typeof")),_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=global(require("module$node_modules$react$index")),_classnames=module(require("module$node_modules$classnames$index")),
_css=require("module$node_modules$rc_util$lib$Dom$css"),_useMergedState3=module(require("module$node_modules$rc_util$lib$hooks$useMergedState")),_Preview=module(require("module$node_modules$rc_image$lib$Preview")),_PreviewGroup=global(require("module$node_modules$rc_image$lib$PreviewGroup")),uuid=0;require=function(_ref){var imgSrc=_ref.src,alt=_ref.alt,onInitialPreviewClose=_ref.onPreviewClose,_ref$prefixCls=_ref.prefixCls;_ref$prefixCls=void 0===_ref$prefixCls?"rc-image":_ref$prefixCls;var _ref$previewPrefixCls=
_ref.previewPrefixCls;_ref$previewPrefixCls=void 0===_ref$previewPrefixCls?"".concat(_ref$prefixCls,"-preview"):_ref$previewPrefixCls;var placeholder=_ref.placeholder,fallback=_ref.fallback,width=_ref.width,height=_ref.height,style=_ref.style,_ref$preview=_ref.preview;_ref$preview=void 0===_ref$preview?!0:_ref$preview;var className=_ref.className,onClick=_ref.onClick,onImageError=_ref.onError,wrapperClassName=_ref.wrapperClassName,wrapperStyle=_ref.wrapperStyle,crossOrigin=_ref.crossOrigin,decoding=
_ref.decoding,loading=_ref.loading,referrerPolicy=_ref.referrerPolicy,sizes=_ref.sizes,srcSet=_ref.srcSet,useMap=_ref.useMap;_ref=(0,_objectWithoutProperties2.default)(_ref,"src alt onPreviewClose prefixCls previewPrefixCls placeholder fallback width height style preview className onClick onError wrapperClassName wrapperStyle crossOrigin decoding loading referrerPolicy sizes srcSet useMap".split(" "));var isCustomPlaceholder=placeholder&&!0!==placeholder,_ref2="object"===(0,_typeof2.default)(_ref$preview)?
_ref$preview:{},previewSrc=_ref2.src,_ref2$visible=_ref2.visible,previewVisible=void 0===_ref2$visible?void 0:_ref2$visible;_ref2$visible=_ref2.onVisibleChange;var onPreviewVisibleChange=void 0===_ref2$visible?onInitialPreviewClose:_ref2$visible;onInitialPreviewClose=_ref2.getContainer;onInitialPreviewClose=void 0===onInitialPreviewClose?void 0:onInitialPreviewClose;_ref2$visible=_ref2.mask;var maskClassName=_ref2.maskClassName,icons=_ref2.icons;_ref2=(0,_objectWithoutProperties2.default)(_ref2,"src visible onVisibleChange getContainer mask maskClassName icons".split(" "));
var src=null!==previewSrc&&void 0!==previewSrc?previewSrc:imgSrc,isControlled=void 0!==previewVisible;previewSrc=(0,_useMergedState3.default)(!!previewVisible,{value:previewVisible,onChange:onPreviewVisibleChange});previewVisible=(0,_slicedToArray2.default)(previewSrc,2);previewSrc=previewVisible[0];var setShowPreview=previewVisible[1];previewVisible=(0,React.useState)(isCustomPlaceholder?"loading":"normal");previewVisible=(0,_slicedToArray2.default)(previewVisible,2);var status=previewVisible[0],
setStatus=previewVisible[1];previewVisible=(0,React.useState)(null);onPreviewVisibleChange=(0,_slicedToArray2.default)(previewVisible,2);previewVisible=onPreviewVisibleChange[0];var setMousePosition=onPreviewVisibleChange[1],isError="error"===status;onPreviewVisibleChange=React.useContext(_PreviewGroup.context);var isPreviewGroup=onPreviewVisibleChange.isPreviewGroup,setCurrent=onPreviewVisibleChange.setCurrent,setGroupShowPreview=onPreviewVisibleChange.setShowPreview,setGroupMousePosition=onPreviewVisibleChange.setMousePosition,
registerImage=onPreviewVisibleChange.registerImage;onPreviewVisibleChange=React.useState(function(){return uuid+=1});var currentId=(0,_slicedToArray2.default)(onPreviewVisibleChange,1)[0],canPreview=_ref$preview&&!isError,onLoad=function(){setStatus("normal")};onPreviewVisibleChange=function(e){onImageError&&onImageError(e);setStatus("error")};var onPreview=function(e){if(!isControlled){var _getOffset=(0,_css.getOffset)(e.target),left=_getOffset.left;_getOffset=_getOffset.top;isPreviewGroup?(setCurrent(currentId),
setGroupMousePosition({x:left,y:_getOffset})):setMousePosition({x:left,y:_getOffset})}isPreviewGroup?setGroupShowPreview(!0):setShowPreview(!0);onClick&&onClick(e)},onPreviewClose=function(e){e.stopPropagation();setShowPreview(!1);isControlled||setMousePosition(null)};React.useEffect(function(){return registerImage(currentId,src)},[]);React.useEffect(function(){var unRegister=registerImage(currentId,src);canPreview||unRegister()},[src,canPreview]);React.useEffect(function(){isError&&setStatus("normal");
isCustomPlaceholder&&setStatus("loading")},[imgSrc]);wrapperClassName=(0,_classnames.default)(_ref$prefixCls,wrapperClassName,(0,_defineProperty2.default)({},"".concat(_ref$prefixCls,"-error"),isError));var mergedSrc=isError&&fallback?fallback:src;style={crossOrigin:crossOrigin,decoding:decoding,loading:loading,referrerPolicy:referrerPolicy,sizes:sizes,srcSet:srcSet,useMap:useMap,alt:alt,className:(0,_classnames.default)("".concat(_ref$prefixCls,"-img"),(0,_defineProperty2.default)({},"".concat(_ref$prefixCls,
"-img-placeholder"),!0===placeholder),className),style:(0,_objectSpread2.default)({height:height},style)};return React.createElement(React.Fragment,null,React.createElement("div",(0,_extends2.default)({},_ref,{className:wrapperClassName,onClick:_ref$preview&&!isError?onPreview:onClick,style:(0,_objectSpread2.default)({width:width,height:height},wrapperStyle)}),React.createElement("img",(0,_extends2.default)({},style,{ref:function(img){"loading"===status&&(null===img||void 0===img?0:img.complete)&&
(img.naturalWidth||img.naturalHeight)&&onLoad()}},isError&&fallback?{src:fallback}:{onLoad:onLoad,onError:onPreviewVisibleChange,src:imgSrc})),"loading"===status&&React.createElement("div",{"aria-hidden":"true",className:"".concat(_ref$prefixCls,"-placeholder")},placeholder),_ref2$visible&&canPreview&&React.createElement("div",{className:(0,_classnames.default)("".concat(_ref$prefixCls,"-mask"),maskClassName)},_ref2$visible)),!isPreviewGroup&&canPreview&&React.createElement(_Preview.default,(0,_extends2.default)({"aria-hidden":!previewSrc,
visible:previewSrc,prefixCls:_ref$previewPrefixCls,onClose:onPreviewClose,mousePosition:previewVisible,src:mergedSrc,alt:alt,getContainer:onInitialPreviewClose,icons:icons},_ref2)))};require.PreviewGroup=_PreviewGroup.default;require.displayName="Image";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_image$lib$Image.js.map
