shadow$provide.module$node_modules$rc_field_form$lib$List=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),
React=global(require("module$node_modules$react$index")),_warning=module(require("module$node_modules$rc_util$lib$warning")),_FieldContext=module(require("module$node_modules$rc_field_form$lib$FieldContext")),_Field=module(require("module$node_modules$rc_field_form$lib$Field")),_valueUtil=require("module$node_modules$rc_field_form$lib$utils$valueUtil");exports.default=function(_ref){var name=_ref.name,initialValue=_ref.initialValue,children=_ref.children,rules=_ref.rules;_ref=_ref.validateTrigger;
var context=React.useContext(_FieldContext.default),keyManager=React.useRef({keys:[],id:0}).current;if("function"!==typeof children)return(0,_warning.default)(!1,"Form.List only accepts function as children."),null;var parentPrefixName=(0,_valueUtil.getNamePath)(context.prefixName)||[],prefixName=[].concat((0,_toConsumableArray2.default)(parentPrefixName),(0,_toConsumableArray2.default)((0,_valueUtil.getNamePath)(name)));return React.createElement(_FieldContext.default.Provider,{value:(0,_objectSpread2.default)((0,
_objectSpread2.default)({},context),{},{prefixName:prefixName})},React.createElement(_Field.default,{name:[],shouldUpdate:function(prevValue,nextValue,_ref2){return"internal"===_ref2.source?!1:prevValue!==nextValue},rules:rules,validateTrigger:_ref,initialValue:initialValue,isList:!0},function(_ref3,meta){var _ref3$value=_ref3.value,onChange=_ref3.onChange,getFieldValue=context.getFieldValue;_ref3=(void 0===_ref3$value?[]:_ref3$value)||[];Array.isArray(_ref3)||(_ref3=[],(0,_warning.default)(!1,"Current value of '".concat(prefixName.join(" \x3e "),
"' is not an array type.")));return children(_ref3.map(function(__,index){__=keyManager.keys[index];void 0===__&&(keyManager.keys[index]=keyManager.id,__=keyManager.keys[index],keyManager.id+=1);return{name:index,key:__,isListField:!0}}),{add:function(defaultValue,index){var newValue=getFieldValue(prefixName||[])||[];0<=index&&index<=newValue.length?(keyManager.keys=[].concat((0,_toConsumableArray2.default)(keyManager.keys.slice(0,index)),[keyManager.id],(0,_toConsumableArray2.default)(keyManager.keys.slice(index))),
onChange([].concat((0,_toConsumableArray2.default)(newValue.slice(0,index)),[defaultValue],(0,_toConsumableArray2.default)(newValue.slice(index))))):((0>index||index>newValue.length)&&(0,_warning.default)(!1,"The second parameter of the add function should be a valid positive number."),keyManager.keys=[].concat((0,_toConsumableArray2.default)(keyManager.keys),[keyManager.id]),onChange([].concat((0,_toConsumableArray2.default)(newValue),[defaultValue])));keyManager.id+=1},remove:function(index){var newValue=
getFieldValue(prefixName||[])||[],indexSet=new Set(Array.isArray(index)?index:[index]);0>=indexSet.size||(keyManager.keys=keyManager.keys.filter(function(_,keysIndex){return!indexSet.has(keysIndex)}),onChange(newValue.filter(function(_,valueIndex){return!indexSet.has(valueIndex)})))},move:function(from,to){if(from!==to){var newValue=getFieldValue(prefixName||[])||[];0>from||from>=newValue.length||0>to||to>=newValue.length||(keyManager.keys=(0,_valueUtil.move)(keyManager.keys,from,to),onChange((0,
_valueUtil.move)(newValue,from,to)))}}},meta)}))}}
//# sourceMappingURL=module$node_modules$rc_field_form$lib$List.js.map
