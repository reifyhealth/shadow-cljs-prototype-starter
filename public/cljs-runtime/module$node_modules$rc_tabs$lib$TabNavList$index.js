shadow$provide.module$node_modules$rc_tabs$lib$TabNavList$index=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),
_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=global(require("module$node_modules$react$index")),_classnames=module(require("module$node_modules$classnames$index")),_raf=module(require("module$node_modules$rc_util$lib$raf")),_rcResizeObserver=module(require("module$node_modules$rc_resize_observer$lib$index")),
_useRaf=global(require("module$node_modules$rc_tabs$lib$hooks$useRaf")),_TabNode=module(require("module$node_modules$rc_tabs$lib$TabNavList$TabNode")),_useOffsets=module(require("module$node_modules$rc_tabs$lib$hooks$useOffsets")),_useVisibleRange3=module(require("module$node_modules$rc_tabs$lib$hooks$useVisibleRange")),_OperationNode=module(require("module$node_modules$rc_tabs$lib$TabNavList$OperationNode")),_TabContext=module(require("module$node_modules$rc_tabs$lib$TabContext")),_useTouchMove=
module(require("module$node_modules$rc_tabs$lib$hooks$useTouchMove")),_useRefs3=module(require("module$node_modules$rc_tabs$lib$hooks$useRefs")),_AddButton=module(require("module$node_modules$rc_tabs$lib$TabNavList$AddButton")),_useSyncState5=module(require("module$node_modules$rc_tabs$lib$hooks$useSyncState")),ExtraContent=function(_ref){var position=_ref.position,prefixCls=_ref.prefixCls;_ref=_ref.extra;if(!_ref)return null;var content;"right"===position&&(content=_ref.right||!_ref.left&&_ref||
null);"left"===position&&(content=_ref.left||null);return content?React.createElement("div",{className:"".concat(prefixCls,"-extra-content")},content):null};require=React.forwardRef(function(props,ref){function alignInRange(value){return value<transformMin?transformMin:value>transformMax?transformMax:value}function clearTouchMoving(){window.clearTimeout(touchMovingRef.current)}function scrollToTab(){var tabOffset=tabOffsets.get(0<arguments.length&&void 0!==arguments[0]?arguments[0]:activeKey)||{width:0,
height:0,left:0,right:0,top:0};if(tabPositionTopOrBottom){var newTransform=transformLeft;rtl?tabOffset.right<transformLeft?newTransform=tabOffset.right:tabOffset.right+tabOffset.width>transformLeft+wrapperWidth&&(newTransform=tabOffset.right+tabOffset.width-wrapperWidth):tabOffset.left<-transformLeft?newTransform=-tabOffset.left:tabOffset.left+tabOffset.width>-transformLeft+wrapperWidth&&(newTransform=-(tabOffset.left+tabOffset.width-wrapperWidth));setTransformTop(0);setTransformLeft(alignInRange(newTransform))}else newTransform=
transformTop,tabOffset.top<-transformTop?newTransform=-tabOffset.top:tabOffset.top+tabOffset.height>-transformTop+wrapperHeight&&(newTransform=-(tabOffset.top+tabOffset.height-wrapperHeight)),setTransformLeft(0),setTransformTop(alignInRange(newTransform))}function cleanInkBarRaf(){_raf.default.cancel(inkBarRafRef.current)}var _classNames,_React$useContext=React.useContext(_TabContext.default),prefixCls=_React$useContext.prefixCls,tabs=_React$useContext.tabs,className=props.className,style=props.style,
id=props.id,animated=props.animated,activeKey=props.activeKey,rtl=props.rtl,extra=props.extra,editable=props.editable,locale=props.locale,tabPosition=props.tabPosition,tabBarGutter=props.tabBarGutter,children=props.children,onTabClick=props.onTabClick,onTabScroll=props.onTabScroll,tabsWrapperRef=(0,React.useRef)(),tabListRef=(0,React.useRef)(),operationsRef=(0,React.useRef)(),innerAddButtonRef=(0,React.useRef)(),_useRefs=(0,_useRefs3.default)(),_useRefs2=(0,_slicedToArray2.default)(_useRefs,2),getBtnRef=
_useRefs2[0],removeBtnRef=_useRefs2[1],tabPositionTopOrBottom="top"===tabPosition||"bottom"===tabPosition,_useSyncState=(0,_useSyncState5.default)(0,function(next,prev){tabPositionTopOrBottom&&onTabScroll&&onTabScroll({direction:next>prev?"left":"right"})}),_useSyncState2=(0,_slicedToArray2.default)(_useSyncState,2),transformLeft=_useSyncState2[0],setTransformLeft=_useSyncState2[1],_useSyncState3=(0,_useSyncState5.default)(0,function(next,prev){!tabPositionTopOrBottom&&onTabScroll&&onTabScroll({direction:next>
prev?"top":"bottom"})}),_useSyncState4=(0,_slicedToArray2.default)(_useSyncState3,2),transformTop=_useSyncState4[0],setTransformTop=_useSyncState4[1],_useState=(0,React.useState)(0),_useState2=(0,_slicedToArray2.default)(_useState,2),wrapperScrollWidth=_useState2[0],setWrapperScrollWidth=_useState2[1],_useState3=(0,React.useState)(0),_useState4=(0,_slicedToArray2.default)(_useState3,2),wrapperScrollHeight=_useState4[0],setWrapperScrollHeight=_useState4[1],_useState5=(0,React.useState)(0),_useState6=
(0,_slicedToArray2.default)(_useState5,2),wrapperContentWidth=_useState6[0],setWrapperContentWidth=_useState6[1],_useState7=(0,React.useState)(0),_useState8=(0,_slicedToArray2.default)(_useState7,2),wrapperContentHeight=_useState8[0],setWrapperContentHeight=_useState8[1],_useState9=(0,React.useState)(null),_useState10=(0,_slicedToArray2.default)(_useState9,2),wrapperWidth=_useState10[0],setWrapperWidth=_useState10[1],_useState11=(0,React.useState)(null),_useState12=(0,_slicedToArray2.default)(_useState11,
2),wrapperHeight=_useState12[0],setWrapperHeight=_useState12[1],_useState13=(0,React.useState)(0),_useState14=(0,_slicedToArray2.default)(_useState13,2),addWidth=_useState14[0],setAddWidth=_useState14[1],_useState15=(0,React.useState)(0),_useState16=(0,_slicedToArray2.default)(_useState15,2),addHeight=_useState16[0],setAddHeight=_useState16[1],_useRafState=(0,_useRaf.useRafState)(new Map),_useRafState2=(0,_slicedToArray2.default)(_useRafState,2),tabSizes=_useRafState2[0],setTabSizes=_useRafState2[1],
tabOffsets=(0,_useOffsets.default)(tabs,tabSizes,wrapperScrollWidth),operationsHiddenClassName="".concat(prefixCls,"-nav-operations-hidden"),transformMin=0,transformMax=0;tabPositionTopOrBottom?rtl?(transformMin=0,transformMax=Math.max(0,wrapperScrollWidth-wrapperWidth)):(transformMin=Math.min(0,wrapperWidth-wrapperScrollWidth),transformMax=0):(transformMin=Math.min(0,wrapperHeight-wrapperScrollHeight),transformMax=0);var touchMovingRef=(0,React.useRef)(),_useState17=(0,React.useState)(),_useState18=
(0,_slicedToArray2.default)(_useState17,2),lockAnimation=_useState18[0],setLockAnimation=_useState18[1];(0,_useTouchMove.default)(tabsWrapperRef,function(offsetX,offsetY){function doMove(setState,offset){setState(function(value){return alignInRange(value+offset)})}if(tabPositionTopOrBottom){if(wrapperWidth>=wrapperScrollWidth)return!1;doMove(setTransformLeft,offsetX)}else{if(wrapperHeight>=wrapperScrollHeight)return!1;doMove(setTransformTop,offsetY)}clearTouchMoving();setLockAnimation(Date.now());
return!0});(0,React.useEffect)(function(){clearTouchMoving();lockAnimation&&(touchMovingRef.current=window.setTimeout(function(){setLockAnimation(0)},100));return clearTouchMoving},[lockAnimation]);var _useVisibleRange=(0,_useVisibleRange3.default)(tabOffsets,{width:wrapperWidth,height:wrapperHeight,left:transformLeft,top:transformTop},{width:wrapperContentWidth,height:wrapperContentHeight},{width:addWidth,height:addHeight},(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{tabs:tabs})),
_useVisibleRange2=(0,_slicedToArray2.default)(_useVisibleRange,2),visibleStart=_useVisibleRange2[0],visibleEnd=_useVisibleRange2[1],tabNodes=tabs.map(function(tab){var key=tab.key;return React.createElement(_TabNode.default,{id:id,prefixCls:prefixCls,key:key,rtl:rtl,tab:tab,closable:tab.closable,editable:editable,active:key===activeKey,tabPosition:tabPosition,tabBarGutter:tabBarGutter,renderWrapper:children,removeAriaLabel:null===locale||void 0===locale?void 0:locale.removeAriaLabel,ref:getBtnRef(key),
onClick:function(e){onTabClick(key,e)},onRemove:function(){removeBtnRef(key)},onFocus:function(){scrollToTab(key);setLockAnimation(Date.now());rtl||(tabsWrapperRef.current.scrollLeft=0);tabsWrapperRef.current.scrollTop=0}})}),onListHolderResize=(0,_useRaf.default)(function(){var _tabsWrapperRef$curre,_tabsWrapperRef$curre2,_innerAddButtonRef$cu,_innerAddButtonRef$cu2,_operationsRef$curren,_operationsRef$curren2,_tabListRef$current,_tabListRef$current2,_operationsRef$curren3,offsetWidth=(null===(_tabsWrapperRef$curre=
tabsWrapperRef.current)||void 0===_tabsWrapperRef$curre?void 0:_tabsWrapperRef$curre.offsetWidth)||0;_tabsWrapperRef$curre=(null===(_tabsWrapperRef$curre2=tabsWrapperRef.current)||void 0===_tabsWrapperRef$curre2?void 0:_tabsWrapperRef$curre2.offsetHeight)||0;_tabsWrapperRef$curre2=(null===(_innerAddButtonRef$cu=innerAddButtonRef.current)||void 0===_innerAddButtonRef$cu?void 0:_innerAddButtonRef$cu.offsetWidth)||0;_innerAddButtonRef$cu=(null===(_innerAddButtonRef$cu2=innerAddButtonRef.current)||void 0===
_innerAddButtonRef$cu2?void 0:_innerAddButtonRef$cu2.offsetHeight)||0;_innerAddButtonRef$cu2=(null===(_operationsRef$curren=operationsRef.current)||void 0===_operationsRef$curren?void 0:_operationsRef$curren.offsetWidth)||0;_operationsRef$curren=(null===(_operationsRef$curren2=operationsRef.current)||void 0===_operationsRef$curren2?void 0:_operationsRef$curren2.offsetHeight)||0;setWrapperWidth(offsetWidth);setWrapperHeight(_tabsWrapperRef$curre);setAddWidth(_tabsWrapperRef$curre2);setAddHeight(_innerAddButtonRef$cu);
_operationsRef$curren2=((null===(_tabListRef$current=tabListRef.current)||void 0===_tabListRef$current?void 0:_tabListRef$current.offsetWidth)||0)-_tabsWrapperRef$curre2;_tabListRef$current=((null===(_tabListRef$current2=tabListRef.current)||void 0===_tabListRef$current2?void 0:_tabListRef$current2.offsetHeight)||0)-_innerAddButtonRef$cu;setWrapperScrollWidth(_operationsRef$curren2);setWrapperScrollHeight(_tabListRef$current);_tabListRef$current2=null===(_operationsRef$curren3=operationsRef.current)||
void 0===_operationsRef$curren3?void 0:_operationsRef$curren3.className.includes(operationsHiddenClassName);setWrapperContentWidth(_operationsRef$curren2-(_tabListRef$current2?0:_innerAddButtonRef$cu2));setWrapperContentHeight(_tabListRef$current-(_tabListRef$current2?0:_operationsRef$curren));setTabSizes(function(){var newSizes=new Map;tabs.forEach(function(_ref2){_ref2=_ref2.key;var btnNode=getBtnRef(_ref2).current;btnNode&&newSizes.set(_ref2,{width:btnNode.offsetWidth,height:btnNode.offsetHeight,
left:btnNode.offsetLeft,top:btnNode.offsetTop})});return newSizes})}),startHiddenTabs=tabs.slice(0,visibleStart),endHiddenTabs=tabs.slice(visibleEnd+1),hiddenTabs=[].concat((0,_toConsumableArray2.default)(startHiddenTabs),(0,_toConsumableArray2.default)(endHiddenTabs)),_useState19=(0,React.useState)(),_useState20=(0,_slicedToArray2.default)(_useState19,2),inkStyle=_useState20[0],setInkStyle=_useState20[1],activeTabOffset=tabOffsets.get(activeKey),inkBarRafRef=(0,React.useRef)();(0,React.useEffect)(function(){var newInkStyle=
{};activeTabOffset&&(tabPositionTopOrBottom?(rtl?newInkStyle.right=activeTabOffset.right:newInkStyle.left=activeTabOffset.left,newInkStyle.width=activeTabOffset.width):(newInkStyle.top=activeTabOffset.top,newInkStyle.height=activeTabOffset.height));cleanInkBarRaf();inkBarRafRef.current=(0,_raf.default)(function(){setInkStyle(newInkStyle)});return cleanInkBarRaf},[activeTabOffset,tabPositionTopOrBottom,rtl]);(0,React.useEffect)(function(){scrollToTab()},[activeKey,activeTabOffset,tabOffsets,tabPositionTopOrBottom]);
(0,React.useEffect)(function(){onListHolderResize()},[rtl,tabBarGutter,activeKey,tabs.map(function(tab){return tab.key}).join("_")]);var hasDropdown=!!hiddenTabs.length,wrapPrefix="".concat(prefixCls,"-nav-wrap");if(tabPositionTopOrBottom)if(rtl){var pingRight=0<transformLeft;var pingLeft=transformLeft+wrapperWidth<wrapperScrollWidth}else pingLeft=0>transformLeft,pingRight=-transformLeft+wrapperWidth<wrapperScrollWidth;else{var pingTop=0>transformTop;var pingBottom=-transformTop+wrapperHeight<wrapperScrollHeight}return React.createElement("div",
{ref:ref,role:"tablist",className:(0,_classnames.default)("".concat(prefixCls,"-nav"),className),style:style,onKeyDown:function(){setLockAnimation(Date.now())}},React.createElement(ExtraContent,{position:"left",extra:extra,prefixCls:prefixCls}),React.createElement(_rcResizeObserver.default,{onResize:onListHolderResize},React.createElement("div",{className:(0,_classnames.default)(wrapPrefix,(_classNames={},(0,_defineProperty2.default)(_classNames,"".concat(wrapPrefix,"-ping-left"),pingLeft),(0,_defineProperty2.default)(_classNames,
"".concat(wrapPrefix,"-ping-right"),pingRight),(0,_defineProperty2.default)(_classNames,"".concat(wrapPrefix,"-ping-top"),pingTop),(0,_defineProperty2.default)(_classNames,"".concat(wrapPrefix,"-ping-bottom"),pingBottom),_classNames)),ref:tabsWrapperRef},React.createElement(_rcResizeObserver.default,{onResize:onListHolderResize},React.createElement("div",{ref:tabListRef,className:"".concat(prefixCls,"-nav-list"),style:{transform:"translate(".concat(transformLeft,"px, ").concat(transformTop,"px)"),
transition:lockAnimation?"none":void 0}},tabNodes,React.createElement(_AddButton.default,{ref:innerAddButtonRef,prefixCls:prefixCls,locale:locale,editable:editable,style:{visibility:hasDropdown?"hidden":null}}),React.createElement("div",{className:(0,_classnames.default)("".concat(prefixCls,"-ink-bar"),(0,_defineProperty2.default)({},"".concat(prefixCls,"-ink-bar-animated"),animated.inkBar)),style:inkStyle}))))),React.createElement(_OperationNode.default,(0,_extends2.default)({},props,{ref:operationsRef,
prefixCls:prefixCls,tabs:hiddenTabs,className:!hasDropdown&&operationsHiddenClassName})),React.createElement(ExtraContent,{position:"right",extra:extra,prefixCls:prefixCls}))});exports.default=require}
//# sourceMappingURL=module$node_modules$rc_tabs$lib$TabNavList$index.js.map
