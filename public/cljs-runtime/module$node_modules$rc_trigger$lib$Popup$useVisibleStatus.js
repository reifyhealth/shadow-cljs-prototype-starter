shadow$provide.module$node_modules$rc_trigger$lib$Popup$useVisibleStatus=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_react=require("module$node_modules$react$index"),_raf=global(require("module$node_modules$rc_util$lib$raf")),StatusQueue=["measure","align",null,"motion"];exports.default=function(visible,doMeasure){function setStatus(nextStatus){destroyRef.current||setInternalStatus(nextStatus)}var _useState=(0,_react.useState)(null);_useState=(0,_slicedToArray2.default)(_useState,2);var status=_useState[0],setInternalStatus=_useState[1],rafRef=(0,_react.useRef)(),destroyRef=(0,_react.useRef)(!1);(0,_react.useEffect)(function(){setStatus("measure")},
[visible]);(0,_react.useEffect)(function(){switch(status){case "measure":doMeasure()}status&&(rafRef.current=(0,_raf.default)((0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(){var index,nextStatus;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:index=StatusQueue.indexOf(status),(nextStatus=StatusQueue[index+1])&&-1!==index&&setStatus(nextStatus);case 3:case "end":return _context.stop()}},_callee)}))))},[status]);(0,_react.useEffect)(function(){return function(){destroyRef.current=
!0;_raf.default.cancel(rafRef.current)}},[]);return[status,function(callback){_raf.default.cancel(rafRef.current);rafRef.current=(0,_raf.default)(function(){setStatus(function(prev){switch(status){case "align":return"motion";case "motion":return"stable"}return prev});null===callback||void 0===callback?void 0:callback()})}]}}
//# sourceMappingURL=module$node_modules$rc_trigger$lib$Popup$useVisibleStatus.js.map
