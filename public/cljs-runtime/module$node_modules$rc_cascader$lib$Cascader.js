shadow$provide.module$node_modules$rc_cascader$lib$Cascader=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),
_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=module(require("module$node_modules$$babel$runtime$helpers$createSuper")),React=global(require("module$node_modules$react$index")),_rcTrigger=module(require("module$node_modules$rc_trigger$lib$index")),_warning=module(require("module$node_modules$warning$warning")),
_KeyCode=module(require("module$node_modules$rc_util$lib$KeyCode")),_arrayTreeFilter=module(require("module$node_modules$array_tree_filter$lib$index")),_utils=require("module$node_modules$rc_cascader$lib$utils"),_Menus=module(require("module$node_modules$rc_cascader$lib$Menus"));require=module(require("module$node_modules$rc_cascader$lib$placements"));global=function(_React$Component){function Cascader(props){(0,_classCallCheck2.default)(this,Cascader);var _this=_super.call(this,props);_this.setPopupVisible=
function(popupVisible){var value=_this.state.value;"popupVisible"in _this.props||_this.setState({popupVisible:popupVisible});popupVisible&&!_this.state.popupVisible&&_this.setState({activeValue:value});_this.props.onPopupVisibleChange(popupVisible)};_this.handleChange=function(options,_ref,e){_ref=_ref.visible;if("keydown"!==e.type||e.keyCode===_KeyCode.default.ENTER)_this.props.onChange(options.map(function(o){return o[_this.getFieldName("value")]}),options),_this.setPopupVisible(_ref)};_this.handlePopupVisibleChange=
function(popupVisible){_this.setPopupVisible(popupVisible)};_this.handleMenuSelect=function(targetOption,menuIndex,e){var triggerNode=_this.trigger.getRootDomNode();triggerNode&&triggerNode.focus&&triggerNode.focus();var _this$props=_this.props;triggerNode=_this$props.changeOnSelect;var loadData=_this$props.loadData;_this$props=_this$props.expandTrigger;if(targetOption&&!targetOption.disabled){var activeValue=_this.state.activeValue;activeValue=activeValue.slice(0,menuIndex+1);activeValue[menuIndex]=
targetOption[_this.getFieldName("value")];menuIndex=_this.getActiveOptions(activeValue);!1===targetOption.isLeaf&&!targetOption[_this.getFieldName("children")]&&loadData?(triggerNode&&_this.handleChange(menuIndex,{visible:!0},e),_this.setState({activeValue:activeValue}),loadData(menuIndex)):(loadData={},targetOption[_this.getFieldName("children")]&&targetOption[_this.getFieldName("children")].length?!triggerNode||"click"!==e.type&&"keydown"!==e.type||("hover"===_this$props?_this.handleChange(menuIndex,
{visible:!1},e):_this.handleChange(menuIndex,{visible:!0},e),loadData.value=activeValue):(_this.handleChange(menuIndex,{visible:!1},e),loadData.value=activeValue),loadData.activeValue=activeValue,("value"in _this.props||"keydown"===e.type&&e.keyCode!==_KeyCode.default.ENTER)&&delete loadData.value,_this.setState(loadData))}};_this.handleItemDoubleClick=function(){_this.props.changeOnSelect&&_this.setPopupVisible(!1)};_this.handleKeyDown=function(e){var children=_this.props.children;if(children&&children.props.onKeyDown)children.props.onKeyDown(e);
else{children=(0,_toConsumableArray2.default)(_this.state.activeValue);var currentLevel=0>children.length-1?0:children.length-1,currentOptions=_this.getCurrentLevelOptions(),currentIndex=currentOptions.map(function(o){return o[_this.getFieldName("value")]}).indexOf(children[currentLevel]);if(e.keyCode===_KeyCode.default.DOWN||e.keyCode===_KeyCode.default.UP||e.keyCode===_KeyCode.default.LEFT||e.keyCode===_KeyCode.default.RIGHT||e.keyCode===_KeyCode.default.ENTER||e.keyCode===_KeyCode.default.SPACE||
e.keyCode===_KeyCode.default.BACKSPACE||e.keyCode===_KeyCode.default.ESC||e.keyCode===_KeyCode.default.TAB){if(_this.state.popupVisible||e.keyCode===_KeyCode.default.BACKSPACE||e.keyCode===_KeyCode.default.LEFT||e.keyCode===_KeyCode.default.RIGHT||e.keyCode===_KeyCode.default.ESC||e.keyCode===_KeyCode.default.TAB){if(e.keyCode===_KeyCode.default.DOWN||e.keyCode===_KeyCode.default.UP)e.preventDefault(),-1!==currentIndex?e.keyCode===_KeyCode.default.DOWN?(currentIndex+=1,currentIndex=currentIndex>=
currentOptions.length?0:currentIndex):(--currentIndex,currentIndex=0>currentIndex?currentOptions.length-1:currentIndex):currentIndex=0,children[currentLevel]=currentOptions[currentIndex][_this.getFieldName("value")];else if(e.keyCode===_KeyCode.default.LEFT||e.keyCode===_KeyCode.default.BACKSPACE)e.preventDefault(),children.splice(children.length-1,1);else if(e.keyCode===_KeyCode.default.RIGHT)e.preventDefault(),currentOptions[currentIndex]&&currentOptions[currentIndex][_this.getFieldName("children")]&&
children.push(currentOptions[currentIndex][_this.getFieldName("children")][0][_this.getFieldName("value")]);else if(e.keyCode===_KeyCode.default.ESC||e.keyCode===_KeyCode.default.TAB){_this.setPopupVisible(!1);if(_this.props.onKeyDown)_this.props.onKeyDown(e);return}children&&0!==children.length||_this.setPopupVisible(!1);children=_this.getActiveOptions(children);_this.handleMenuSelect(children[children.length-1],children.length-1,e)}else _this.setPopupVisible(!0);if(_this.props.onKeyDown)_this.props.onKeyDown(e)}}};
_this.saveTrigger=function(node){_this.trigger=node};var initialValue=[];"value"in props?initialValue=props.value||[]:"defaultValue"in props&&(initialValue=props.defaultValue||[]);(0,_warning.default)(!("filedNames"in props),"`filedNames` of Cascader is a typo usage and deprecated, please use `fieldNames` instead.");_this.state={popupVisible:props.popupVisible,activeValue:initialValue,value:initialValue,prevProps:props};_this.defaultFieldNames={label:"label",value:"value",children:"children"};return _this}
(0,_inherits2.default)(Cascader,_React$Component);var _super=(0,_createSuper2.default)(Cascader);(0,_createClass2.default)(Cascader,[{key:"getPopupDOMNode",value:function(){return this.trigger.getPopupDomNode()}},{key:"getFieldName",value:function(name){var defaultFieldNames=this.defaultFieldNames,_this$props2=this.props,filedNames=_this$props2.filedNames;return"filedNames"in this.props?filedNames[name]||defaultFieldNames[name]:_this$props2.fieldNames[name]||defaultFieldNames[name]}},{key:"getFieldNames",
value:function(){var _this$props3=this.props,filedNames=_this$props3.filedNames;return"filedNames"in this.props?filedNames:_this$props3.fieldNames}},{key:"getCurrentLevelOptions",value:function(){var _this2=this,_this$props$options=this.props.options;_this$props$options=void 0===_this$props$options?[]:_this$props$options;var _this$state$activeVal=this.state.activeValue,activeValue=void 0===_this$state$activeVal?[]:_this$state$activeVal;_this$state$activeVal=(0,_arrayTreeFilter.default)(_this$props$options,
function(o,level){return o[_this2.getFieldName("value")]===activeValue[level]},{childrenKeyName:this.getFieldName("children")});return _this$state$activeVal[_this$state$activeVal.length-2]?_this$state$activeVal[_this$state$activeVal.length-2][this.getFieldName("children")]:(0,_toConsumableArray2.default)(_this$props$options).filter(function(o){return!o.disabled})}},{key:"getActiveOptions",value:function(activeValue){var _this3=this;return(0,_arrayTreeFilter.default)(this.props.options||[],function(o,
level){return o[_this3.getFieldName("value")]===activeValue[level]},{childrenKeyName:this.getFieldName("children")})}},{key:"render",value:function(){var _this$props4=this.props,prefixCls=_this$props4.prefixCls,transitionName=_this$props4.transitionName,popupClassName=_this$props4.popupClassName,_this$props4$options=_this$props4.options,options=void 0===_this$props4$options?[]:_this$props4$options;_this$props4$options=_this$props4.disabled;var builtinPlacements=_this$props4.builtinPlacements,popupPlacement=
_this$props4.popupPlacement,children=_this$props4.children,dropdownRender=_this$props4.dropdownRender;_this$props4=(0,_objectWithoutProperties2.default)(_this$props4,"prefixCls transitionName popupClassName options disabled builtinPlacements popupPlacement children dropdownRender".split(" "));var menus=React.createElement("div",null),emptyMenuClassName="";options&&0<options.length?menus=React.createElement(_Menus.default,Object.assign({},this.props,{fieldNames:this.getFieldNames(),defaultFieldNames:this.defaultFieldNames,
activeValue:this.state.activeValue,onSelect:this.handleMenuSelect,onItemDoubleClick:this.handleItemDoubleClick,visible:this.state.popupVisible})):emptyMenuClassName=" ".concat(prefixCls,"-menus-empty");options=menus;dropdownRender&&(options=dropdownRender(menus));return React.createElement(_rcTrigger.default,Object.assign({ref:this.saveTrigger},_this$props4,{popupPlacement:popupPlacement,builtinPlacements:builtinPlacements,popupTransitionName:transitionName,action:_this$props4$options?[]:["click"],
popupVisible:_this$props4$options?!1:this.state.popupVisible,onPopupVisibleChange:this.handlePopupVisibleChange,prefixCls:"".concat(prefixCls,"-menus"),popupClassName:popupClassName+emptyMenuClassName,popup:options}),React.cloneElement(children,{onKeyDown:this.handleKeyDown,tabIndex:_this$props4$options?void 0:0}))}}],[{key:"getDerivedStateFromProps",value:function(nextProps,prevState){prevState=prevState.prevProps;prevState=void 0===prevState?{}:prevState;var newState={prevProps:nextProps};"value"in
nextProps&&!(0,_utils.isEqualArrays)(prevState.value,nextProps.value)&&(newState.value=nextProps.value||[],"loadData"in nextProps||(newState.activeValue=nextProps.value||[]));"popupVisible"in nextProps&&(newState.popupVisible=nextProps.popupVisible);return newState}}]);return Cascader}(React.Component);global.defaultProps={onChange:function(){},onPopupVisibleChange:function(){},disabled:!1,transitionName:"",prefixCls:"rc-cascader",popupClassName:"",popupPlacement:"bottomLeft",builtinPlacements:require.default,
expandTrigger:"click",fieldNames:{label:"label",value:"value",children:"children"},expandIcon:"\x3e"};exports.default=global}
//# sourceMappingURL=module$node_modules$rc_cascader$lib$Cascader.js.map
