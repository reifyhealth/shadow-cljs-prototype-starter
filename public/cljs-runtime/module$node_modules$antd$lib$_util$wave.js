shadow$provide.module$node_modules$antd$lib$_util$wave=function(global,require,module,exports){function isHidden(element){return!element||null===element.offsetParent||element.hidden}function isNotGrey(color){return(color=(color||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&color[1]&&color[2]&&color[3]?!(color[1]===color[2]&&color[2]===color[3]):!0}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=module(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=module(require("module$node_modules$$babel$runtime$helpers$createSuper")),
React=global(require("module$node_modules$react$index")),_ref2=require("module$node_modules$rc_util$lib$ref"),_raf=module(require("module$node_modules$antd$lib$_util$raf")),_configProvider=require("module$node_modules$antd$lib$config_provider$index"),_reactNode=require("module$node_modules$antd$lib$_util$reactNode"),styleForPseudo;require=function(_React$Component){function Wave(){(0,_classCallCheck2["default"])(this,Wave);var _this=_super.apply(this,arguments);_this.containerRef=React.createRef();
_this.animationStart=!1;_this.destroyed=!1;_this.onClick=function(node,waveColor){if(!(!node||isHidden(node)||0<=node.className.indexOf("-leave"))){var insertExtraNode=_this.props.insertExtraNode;_this.extraNode=document.createElement("div");var extraNode=(0,_assertThisInitialized2["default"])(_this).extraNode,getPrefixCls=_this.context.getPrefixCls;extraNode.className="".concat(getPrefixCls(""),"-click-animating-node");var attributeName=_this.getAttributeName();node.setAttribute(attributeName,"true");
styleForPseudo=styleForPseudo||document.createElement("style");waveColor&&"#ffffff"!==waveColor&&"rgb(255, 255, 255)"!==waveColor&&isNotGrey(waveColor)&&!/rgba\((?:\d*, ){3}0\)/.test(waveColor)&&"transparent"!==waveColor&&(_this.csp&&_this.csp.nonce&&(styleForPseudo.nonce=_this.csp.nonce),extraNode.style.borderColor=waveColor,styleForPseudo.innerHTML="\n      [".concat(getPrefixCls(""),"-click-animating-without-extra-node\x3d'true']::after, .").concat(getPrefixCls(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(waveColor,
";\n      }"),node.ownerDocument.body.contains(styleForPseudo)||node.ownerDocument.body.appendChild(styleForPseudo));insertExtraNode&&node.appendChild(extraNode);["transition","animation"].forEach(function(name){node.addEventListener("".concat(name,"start"),_this.onTransitionStart);node.addEventListener("".concat(name,"end"),_this.onTransitionEnd)})}};_this.onTransitionStart=function(e){if(!_this.destroyed){var node=_this.containerRef.current;e&&e.target===node&&!_this.animationStart&&_this.resetEffect(node)}};
_this.onTransitionEnd=function(e){e&&"fadeEffect"===e.animationName&&_this.resetEffect(e.target)};_this.bindAnimationEvent=function(node){if(node&&node.getAttribute&&!node.getAttribute("disabled")&&!(0<=node.className.indexOf("disabled"))){var onClick=function(e){if("INPUT"!==e.target.tagName&&!isHidden(e.target)){_this.resetEffect(node);var waveColor=getComputedStyle(node).getPropertyValue("border-top-color")||getComputedStyle(node).getPropertyValue("border-color")||getComputedStyle(node).getPropertyValue("background-color");
_this.clickWaveTimeoutId=window.setTimeout(function(){return _this.onClick(node,waveColor)},0);_raf["default"].cancel(_this.animationStartId);_this.animationStart=!0;_this.animationStartId=(0,_raf["default"])(function(){_this.animationStart=!1},10)}};node.addEventListener("click",onClick,!0);return{cancel:function(){node.removeEventListener("click",onClick,!0)}}}};_this.renderWave=function(_ref){var children=_this.props.children;_this.csp=_ref.csp;if(!React.isValidElement(children))return children;
_ref=_this.containerRef;(0,_ref2.supportRef)(children)&&(_ref=(0,_ref2.composeRef)(children.ref,_this.containerRef));return(0,_reactNode.cloneElement)(children,{ref:_ref})};return _this}(0,_inherits2["default"])(Wave,_React$Component);var _super=(0,_createSuper2["default"])(Wave);(0,_createClass2["default"])(Wave,[{key:"componentDidMount",value:function(){var node=this.containerRef.current;node&&1===node.nodeType&&(this.instance=this.bindAnimationEvent(node))}},{key:"componentWillUnmount",value:function(){this.instance&&
this.instance.cancel();this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId);this.destroyed=!0}},{key:"getAttributeName",value:function(){var getPrefixCls=this.context.getPrefixCls;return this.props.insertExtraNode?"".concat(getPrefixCls(""),"-click-animating"):"".concat(getPrefixCls(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(node){var _this2=this;if(node&&node!==this.extraNode&&node instanceof Element){var insertExtraNode=this.props.insertExtraNode,attributeName=
this.getAttributeName();node.setAttribute(attributeName,"false");styleForPseudo&&(styleForPseudo.innerHTML="");insertExtraNode&&this.extraNode&&node.contains(this.extraNode)&&node.removeChild(this.extraNode);["transition","animation"].forEach(function(name){node.removeEventListener("".concat(name,"start"),_this2.onTransitionStart);node.removeEventListener("".concat(name,"end"),_this2.onTransitionEnd)})}}},{key:"render",value:function(){return React.createElement(_configProvider.ConfigConsumer,null,
this.renderWave)}}]);return Wave}(React.Component);exports["default"]=require;require.contextType=_configProvider.ConfigContext}
//# sourceMappingURL=module$node_modules$antd$lib$_util$wave.js.map
