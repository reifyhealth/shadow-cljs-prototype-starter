shadow$provide.module$node_modules$rc_motion$lib$hooks$useStatus=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(supportMotion,visible,getElement,_ref){function onInternalMotionEnd(event){var element=getElement()||cacheElementRef.current;if(!event||event.deadline||
event.target===element){var canEnd;status===_interface.STATUS_APPEAR&&activeRef.current?canEnd=null===onAppearEnd||void 0===onAppearEnd?void 0:onAppearEnd(element,event):status===_interface.STATUS_ENTER&&activeRef.current?canEnd=null===onEnterEnd||void 0===onEnterEnd?void 0:onEnterEnd(element,event):status===_interface.STATUS_LEAVE&&activeRef.current&&(canEnd=null===onLeaveEnd||void 0===onLeaveEnd?void 0:onLeaveEnd(element,event));!1===canEnd||destroyedRef.current||(setStatus(_interface.STATUS_NONE),
setStyle(null))}}var _ref$motionEnter=_ref.motionEnter,motionEnter=void 0===_ref$motionEnter?!0:_ref$motionEnter;_ref$motionEnter=_ref.motionAppear;var motionAppear=void 0===_ref$motionEnter?!0:_ref$motionEnter;_ref$motionEnter=_ref.motionLeave;var motionLeave=void 0===_ref$motionEnter?!0:_ref$motionEnter,motionDeadline=_ref.motionDeadline,motionLeaveImmediately=_ref.motionLeaveImmediately,onAppearPrepare=_ref.onAppearPrepare,onEnterPrepare=_ref.onEnterPrepare,onLeavePrepare=_ref.onLeavePrepare,onAppearStart=
_ref.onAppearStart,onEnterStart=_ref.onEnterStart,onLeaveStart=_ref.onLeaveStart,onAppearActive=_ref.onAppearActive,onEnterActive=_ref.onEnterActive,onLeaveActive=_ref.onLeaveActive,onAppearEnd=_ref.onAppearEnd,onEnterEnd=_ref.onEnterEnd,onLeaveEnd=_ref.onLeaveEnd,onVisibleChanged=_ref.onVisibleChanged;_ref=(0,_useState7.default)();_ref=(0,_slicedToArray2.default)(_ref,2);var asyncVisible=_ref[0],setAsyncVisible=_ref[1];_ref=(0,_useState7.default)(_interface.STATUS_NONE);_ref=(0,_slicedToArray2.default)(_ref,
2);var status=_ref[0],setStatus=_ref[1];_ref=(0,_useState7.default)(null);_ref$motionEnter=(0,_slicedToArray2.default)(_ref,2);_ref=_ref$motionEnter[0];var setStyle=_ref$motionEnter[1],mountedRef=(0,React.useRef)(!1),deadlineRef=(0,React.useRef)(null),destroyedRef=(0,React.useRef)(!1),cacheElementRef=(0,React.useRef)(null),activeRef=(0,React.useRef)(!1);_ref$motionEnter=(0,_useDomMotionEvents3.default)(onInternalMotionEnd);var patchMotionEvents=(0,_slicedToArray2.default)(_ref$motionEnter,1)[0],eventHandlers=
React.useMemo(function(){var _ref2,_ref3,_ref4;switch(status){case "appear":return _ref2={},(0,_defineProperty2.default)(_ref2,_interface.STEP_PREPARE,onAppearPrepare),(0,_defineProperty2.default)(_ref2,_interface.STEP_START,onAppearStart),(0,_defineProperty2.default)(_ref2,_interface.STEP_ACTIVE,onAppearActive),_ref2;case "enter":return _ref3={},(0,_defineProperty2.default)(_ref3,_interface.STEP_PREPARE,onEnterPrepare),(0,_defineProperty2.default)(_ref3,_interface.STEP_START,onEnterStart),(0,_defineProperty2.default)(_ref3,
_interface.STEP_ACTIVE,onEnterActive),_ref3;case "leave":return _ref4={},(0,_defineProperty2.default)(_ref4,_interface.STEP_PREPARE,onLeavePrepare),(0,_defineProperty2.default)(_ref4,_interface.STEP_START,onLeaveStart),(0,_defineProperty2.default)(_ref4,_interface.STEP_ACTIVE,onLeaveActive),_ref4;default:return{}}},[status]);_ref$motionEnter=(0,_useStepQueue3.default)(status,function(newStep){if(newStep===_interface.STEP_PREPARE)return(newStep=eventHandlers[_interface.STEP_PREPARE])?newStep(getElement()||
cacheElementRef.current):_useStepQueue3.SkipStep;if(step in eventHandlers){var _eventHandlers$step;setStyle((null===(_eventHandlers$step=eventHandlers[step])||void 0===_eventHandlers$step?void 0:_eventHandlers$step.call(eventHandlers,getElement()||cacheElementRef.current,null))||null)}step===_interface.STEP_ACTIVE&&(patchMotionEvents(getElement()||cacheElementRef.current),0<motionDeadline&&(clearTimeout(deadlineRef.current),deadlineRef.current=setTimeout(function(){onInternalMotionEnd({deadline:!0})},
motionDeadline)));return _useStepQueue3.DoStep});_ref$motionEnter=(0,_slicedToArray2.default)(_ref$motionEnter,2);var startStep=_ref$motionEnter[0],step=_ref$motionEnter[1];_ref$motionEnter=(0,_useStepQueue3.isActive)(step);activeRef.current=_ref$motionEnter;(0,_useIsomorphicLayoutEffect.default)(function(){setAsyncVisible(visible);if(supportMotion){var isMounted=mountedRef.current;mountedRef.current=!0;if(!isMounted&&visible&&motionAppear)var nextStatus=_interface.STATUS_APPEAR;isMounted&&visible&&
motionEnter&&(nextStatus=_interface.STATUS_ENTER);if(isMounted&&!visible&&motionLeave||!isMounted&&motionLeaveImmediately&&!visible&&motionLeave)nextStatus=_interface.STATUS_LEAVE;nextStatus&&(setStatus(nextStatus),startStep())}},[visible]);(0,React.useEffect)(function(){(status===_interface.STATUS_APPEAR&&!motionAppear||status===_interface.STATUS_ENTER&&!motionEnter||status===_interface.STATUS_LEAVE&&!motionLeave)&&setStatus(_interface.STATUS_NONE)},[motionAppear,motionEnter,motionLeave]);(0,React.useEffect)(function(){return function(){clearTimeout(deadlineRef.current);
destroyedRef.current=!0}},[]);(0,React.useEffect)(function(){void 0!==asyncVisible&&status===_interface.STATUS_NONE&&(null===onVisibleChanged||void 0===onVisibleChanged?void 0:onVisibleChanged(asyncVisible))},[asyncVisible,status]);eventHandlers[_interface.STEP_PREPARE]&&step===_interface.STEP_START&&(_ref=(0,_objectSpread2.default)({transition:"none"},_ref));return[status,step,_ref,null!==asyncVisible&&void 0!==asyncVisible?asyncVisible:visible]};var _objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=global(require("module$node_modules$react$index")),_interface=require("module$node_modules$rc_motion$lib$interface"),_useState7=module(require("module$node_modules$rc_motion$lib$hooks$useState")),_useIsomorphicLayoutEffect=module(require("module$node_modules$rc_motion$lib$hooks$useIsomorphicLayoutEffect")),_useStepQueue3=
global(require("module$node_modules$rc_motion$lib$hooks$useStepQueue")),_useDomMotionEvents3=module(require("module$node_modules$rc_motion$lib$hooks$useDomMotionEvents"))}
//# sourceMappingURL=module$node_modules$rc_motion$lib$hooks$useStatus.js.map
