shadow$provide.module$node_modules$rc_select$lib$OptionList=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),
_extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=global(require("module$node_modules$react$index")),_KeyCode=module(require("module$node_modules$rc_util$lib$KeyCode")),_pickAttrs=module(require("module$node_modules$rc_util$lib$pickAttrs")),_useMemo=module(require("module$node_modules$rc_util$lib$hooks$useMemo")),_classnames=module(require("module$node_modules$classnames$index")),
_rcVirtualList=module(require("module$node_modules$rc_virtual_list$lib$index")),_TransBtn=module(require("module$node_modules$rc_select$lib$TransBtn"));require=React.forwardRef(function(_ref,ref){function renderItem(index){var item=memoFlattenOptions[index];if(!item)return null;var itemData=item.data||{},value=itemData.value,label=itemData.label,children=itemData.children;itemData=(0,_pickAttrs.default)(itemData,!0);label=childrenAsData?children:label;return item?React.createElement("div",(0,_extends2.default)({"aria-label":"string"===
typeof label?label:null},itemData,{key:index,role:"option",id:"".concat(id,"_list_").concat(index),"aria-selected":values.has(value)}),value):null}var id=_ref.id,flattenOptions=_ref.flattenOptions,childrenAsData=_ref.childrenAsData,values=_ref.values,searchValue=_ref.searchValue,multiple=_ref.multiple,defaultActiveFirstOption=_ref.defaultActiveFirstOption,height=_ref.height,itemHeight=_ref.itemHeight,notFoundContent=_ref.notFoundContent,open=_ref.open,menuItemSelectedIcon=_ref.menuItemSelectedIcon,
virtual=_ref.virtual,onSelect=_ref.onSelect,onToggleOpen=_ref.onToggleOpen,onActiveValue=_ref.onActiveValue,onScroll=_ref.onScroll,onMouseEnter=_ref.onMouseEnter,itemPrefixCls="".concat(_ref.prefixCls,"-item"),memoFlattenOptions=(0,_useMemo.default)(function(){return flattenOptions},[open,flattenOptions],function(prev,next){return next[0]&&prev[1]!==next[1]}),listRef=React.useRef(null);_ref=function(event){event.preventDefault()};var scrollIntoView=function(index){listRef.current&&listRef.current.scrollTo({index:index})},
getEnabledActiveIndex=function(index){for(var offset=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,len=memoFlattenOptions.length,i=0;i<len;i+=1){var current=(index+i*offset+len)%len,_memoFlattenOptions$c=memoFlattenOptions[current],data=_memoFlattenOptions$c.data;if(!_memoFlattenOptions$c.group&&!data.disabled)return current}return-1},_React$useState=React.useState(function(){return getEnabledActiveIndex(0)});_React$useState=(0,_slicedToArray2.default)(_React$useState,2);var activeIndex=
_React$useState[0],setActiveIndex=_React$useState[1],setActive=function(index){var fromKeyboard=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;setActiveIndex(index);fromKeyboard={source:fromKeyboard?"keyboard":"mouse"};var flattenItem=memoFlattenOptions[index];flattenItem?onActiveValue(flattenItem.data.value,index,fromKeyboard):onActiveValue(null,-1,fromKeyboard)};React.useEffect(function(){setActive(!1!==defaultActiveFirstOption?getEnabledActiveIndex(0):-1)},[memoFlattenOptions.length,
searchValue]);React.useEffect(function(){var timeoutId=setTimeout(function(){if(!multiple&&open&&1===values.size){var value=Array.from(values)[0],index=memoFlattenOptions.findIndex(function(_ref2){return _ref2.data.value===value});setActive(index);scrollIntoView(index)}});if(open){var _listRef$current;null===(_listRef$current=listRef.current)||void 0===_listRef$current?void 0:_listRef$current.scrollTo(void 0)}return function(){return clearTimeout(timeoutId)}},[open]);var onSelectValue=function(value){void 0!==
value&&onSelect(value,{selected:!values.has(value)});multiple||onToggleOpen(!1)};React.useImperativeHandle(ref,function(){return{onKeyDown:function(event){var which=event.which;switch(which){case _KeyCode.default.UP:case _KeyCode.default.DOWN:event=0;which===_KeyCode.default.UP?event=-1:which===_KeyCode.default.DOWN&&(event=1);0!==event&&(event=getEnabledActiveIndex(activeIndex+event,event),scrollIntoView(event),setActive(event,!0));break;case _KeyCode.default.ENTER:(which=memoFlattenOptions[activeIndex])&&
!which.data.disabled?onSelectValue(which.data.value):onSelectValue(void 0);open&&event.preventDefault();break;case _KeyCode.default.ESC:onToggleOpen(!1),open&&event.stopPropagation()}},onKeyUp:function(){},scrollTo:function(index){scrollIntoView(index)}}});return 0===memoFlattenOptions.length?React.createElement("div",{role:"listbox",id:"".concat(id,"_list"),className:"".concat(itemPrefixCls,"-empty"),onMouseDown:_ref},notFoundContent):React.createElement(React.Fragment,null,React.createElement("div",
{role:"listbox",id:"".concat(id,"_list"),style:{height:0,width:0,overflow:"hidden"}},renderItem(activeIndex-1),renderItem(activeIndex),renderItem(activeIndex+1)),React.createElement(_rcVirtualList.default,{itemKey:"key",ref:listRef,data:memoFlattenOptions,height:height,itemHeight:itemHeight,fullHeight:!1,onMouseDown:_ref,onScroll:onScroll,virtual:virtual,onMouseEnter:onMouseEnter},function(_ref3,itemIndex){var _classNames,groupOption=_ref3.groupOption,data=_ref3.data,label=data.label,key=data.key;
if(_ref3.group)return React.createElement("div",{className:(0,_classnames.default)(itemPrefixCls,"".concat(itemPrefixCls,"-group"))},void 0!==label?label:key);var disabled=data.disabled,value=data.value;_ref3=data.title;var children=data.children;key=data.style;var className=data.className;data=(0,_objectWithoutProperties2.default)(data,"disabled value title children style className".split(" "));var selected=values.has(value),optionPrefixCls="".concat(itemPrefixCls,"-option");groupOption=(0,_classnames.default)(itemPrefixCls,
optionPrefixCls,className,(_classNames={},(0,_defineProperty2.default)(_classNames,"".concat(optionPrefixCls,"-grouped"),groupOption),(0,_defineProperty2.default)(_classNames,"".concat(optionPrefixCls,"-active"),activeIndex===itemIndex&&!disabled),(0,_defineProperty2.default)(_classNames,"".concat(optionPrefixCls,"-disabled"),disabled),(0,_defineProperty2.default)(_classNames,"".concat(optionPrefixCls,"-selected"),selected),_classNames));_classNames=!menuItemSelectedIcon||"function"===typeof menuItemSelectedIcon||
selected;label=(childrenAsData?children:label)||value;children="string"===typeof label||"number"===typeof label?label.toString():void 0;void 0!==_ref3&&(children=_ref3);return React.createElement("div",(0,_extends2.default)({},data,{"aria-selected":selected,className:groupOption,title:children,onMouseMove:function(){activeIndex===itemIndex||disabled||setActive(itemIndex)},onClick:function(){disabled||onSelectValue(value)},style:key}),React.createElement("div",{className:"".concat(optionPrefixCls,
"-content")},label),React.isValidElement(menuItemSelectedIcon)||selected,_classNames&&React.createElement(_TransBtn.default,{className:"".concat(itemPrefixCls,"-option-state"),customizeIcon:menuItemSelectedIcon,customizeIconProps:{isSelected:selected}},selected?"âœ“":null))}))});require.displayName="OptionList";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_select$lib$OptionList.js.map
