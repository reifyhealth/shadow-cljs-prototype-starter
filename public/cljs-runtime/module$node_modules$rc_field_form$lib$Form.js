shadow$provide.module$node_modules$rc_field_form$lib$Form=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=global(require("module$node_modules$react$index")),_useForm3=module(require("module$node_modules$rc_field_form$lib$useForm")),_FieldContext=global(require("module$node_modules$rc_field_form$lib$FieldContext")),_FormContext=module(require("module$node_modules$rc_field_form$lib$FormContext")),
_valueUtil=require("module$node_modules$rc_field_form$lib$utils$valueUtil");exports.default=function(_ref,ref){var name=_ref.name,initialValues=_ref.initialValues,fields=_ref.fields,form=_ref.form,preserve=_ref.preserve,children=_ref.children,_ref$component=_ref.component;_ref$component=void 0===_ref$component?"form":_ref$component;var validateMessages=_ref.validateMessages,_ref$validateTrigger=_ref.validateTrigger,validateTrigger=void 0===_ref$validateTrigger?"onChange":_ref$validateTrigger;_ref$validateTrigger=
_ref.onValuesChange;var _onFieldsChange=_ref.onFieldsChange,_onFinish=_ref.onFinish,onFinishFailed=_ref.onFinishFailed,restProps=(0,_objectWithoutProperties2.default)(_ref,"name initialValues fields form preserve children component validateMessages validateTrigger onValuesChange onFieldsChange onFinish onFinishFailed".split(" ")),formContext=React.useContext(_FormContext.default);_ref=(0,_useForm3.default)(form);var formInstance=(0,_slicedToArray2.default)(_ref,1)[0],_formInstance$getInte=formInstance.getInternalHooks(_FieldContext.HOOK_MARK);
_ref=_formInstance$getInte.useSubscribe;form=_formInstance$getInte.setInitialValues;var setCallbacks=_formInstance$getInte.setCallbacks,setValidateMessages=_formInstance$getInte.setValidateMessages;_formInstance$getInte=_formInstance$getInte.setPreserve;React.useImperativeHandle(ref,function(){return formInstance});React.useEffect(function(){formContext.registerForm(name,formInstance);return function(){formContext.unregisterForm(name)}},[formContext,formInstance,name]);setValidateMessages((0,_objectSpread2.default)((0,
_objectSpread2.default)({},formContext.validateMessages),validateMessages));setCallbacks({onValuesChange:_ref$validateTrigger,onFieldsChange:function(changedFields){formContext.triggerFormChange(name,changedFields);if(_onFieldsChange){for(var _len=arguments.length,rest=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];_onFieldsChange.apply(void 0,[changedFields].concat(rest))}},onFinish:function(values){formContext.triggerFormFinish(name,values);_onFinish&&_onFinish(values)},
onFinishFailed:onFinishFailed});_formInstance$getInte(preserve);ref=React.useRef(null);form(initialValues,!ref.current);ref.current||(ref.current=!0);initialValues=children;if(ref="function"===typeof children)initialValues=formInstance.getFieldsValue(!0),initialValues=children(initialValues,formInstance);_ref(!ref);var prevFieldsRef=React.useRef();React.useEffect(function(){(0,_valueUtil.isSimilar)(prevFieldsRef.current||[],fields||[])||formInstance.setFields(fields||[]);prevFieldsRef.current=fields},
[fields,formInstance]);children=React.useMemo(function(){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},formInstance),{},{validateTrigger:validateTrigger})},[formInstance,validateTrigger]);children=React.createElement(_FieldContext.default.Provider,{value:children},initialValues);return!1===_ref$component?children:React.createElement(_ref$component,(0,_extends2.default)({},restProps,{onSubmit:function(event){event.preventDefault();event.stopPropagation();formInstance.submit()},onReset:function(event){var _restProps$onReset;
event.preventDefault();formInstance.resetFields();null===(_restProps$onReset=restProps.onReset)||void 0===_restProps$onReset?void 0:_restProps$onReset.call(restProps,event)}}),children)}}
//# sourceMappingURL=module$node_modules$rc_field_form$lib$Form.js.map
