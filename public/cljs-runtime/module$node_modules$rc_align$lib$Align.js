shadow$provide.module$node_modules$rc_align$lib$Align=function(global,require,module,exports){function getPoint(point){return"object"===(0,_typeof2.default)(point)&&point?point:null}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),
_react=global(require("module$node_modules$react$index")),_ref2=require("module$node_modules$rc_util$lib$ref"),_isVisible=global(require("module$node_modules$rc_util$lib$Dom$isVisible")),_domAlign=require("module$node_modules$dom_align$dist_node$index"),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener")),_util=require("module$node_modules$rc_align$lib$util"),_useBuffer3=global(require("module$node_modules$rc_align$lib$hooks$useBuffer"));require=_react.default.forwardRef(function(_ref,
ref){var children=_ref.children,disabled=_ref.disabled,target=_ref.target,align=_ref.align,onAlign=_ref.onAlign,monitorWindowResize=_ref.monitorWindowResize;_ref=_ref.monitorBufferTime;_ref=void 0===_ref?0:_ref;var cacheRef=_react.default.useRef({}),nodeRef=_react.default.useRef();children=_react.default.Children.only(children);var forceAlignPropsRef=_react.default.useRef({});forceAlignPropsRef.current.disabled=disabled;forceAlignPropsRef.current.target=target;forceAlignPropsRef.current.onAlign=onAlign;
onAlign=(0,_useBuffer3.default)(function(){var _forceAlignPropsRef$c=forceAlignPropsRef.current,latestTarget=_forceAlignPropsRef$c.target,latestOnAlign=_forceAlignPropsRef$c.onAlign;if(!_forceAlignPropsRef$c.disabled&&latestTarget){_forceAlignPropsRef$c=nodeRef.current;var result,element="function"!==typeof latestTarget?null:latestTarget();latestTarget=getPoint(latestTarget);cacheRef.current.element=element;cacheRef.current.point=latestTarget;var activeElement=document.activeElement;element&&(0,_isVisible.default)(element)?
result=(0,_domAlign.alignElement)(_forceAlignPropsRef$c,element,align):latestTarget&&(result=(0,_domAlign.alignPoint)(_forceAlignPropsRef$c,latestTarget,align));(0,_util.restoreFocus)(activeElement,_forceAlignPropsRef$c);latestOnAlign&&result&&latestOnAlign(_forceAlignPropsRef$c,result);return!0}return!1},_ref);onAlign=(0,_slicedToArray2.default)(onAlign,2);var _forceAlign=onAlign[0],cancelForceAlign=onAlign[1],resizeMonitor=_react.default.useRef({cancel:function(){}}),sourceResizeMonitor=_react.default.useRef({cancel:function(){}});
_react.default.useEffect(function(){var element="function"!==typeof target?null:target(),point=getPoint(target);nodeRef.current!==sourceResizeMonitor.current.element&&(sourceResizeMonitor.current.cancel(),sourceResizeMonitor.current.element=nodeRef.current,sourceResizeMonitor.current.cancel=(0,_util.monitorResize)(nodeRef.current,_forceAlign));cacheRef.current.element===element&&(0,_util.isSamePoint)(cacheRef.current.point,point)||(_forceAlign(),resizeMonitor.current.element!==element&&(resizeMonitor.current.cancel(),
resizeMonitor.current.element=element,resizeMonitor.current.cancel=(0,_util.monitorResize)(element,_forceAlign)))});_react.default.useEffect(function(){disabled?cancelForceAlign():_forceAlign()},[disabled]);var winResizeRef=_react.default.useRef(null);_react.default.useEffect(function(){monitorWindowResize?winResizeRef.current||(winResizeRef.current=(0,_addEventListener.default)(window,"resize",_forceAlign)):winResizeRef.current&&(winResizeRef.current.remove(),winResizeRef.current=null)},[monitorWindowResize]);
_react.default.useEffect(function(){return function(){resizeMonitor.current.cancel();sourceResizeMonitor.current.cancel();winResizeRef.current&&winResizeRef.current.remove();cancelForceAlign()}},[]);_react.default.useImperativeHandle(ref,function(){return{forceAlign:function(){return _forceAlign(!0)}}});_react.default.isValidElement(children)&&(children=_react.default.cloneElement(children,{ref:(0,_ref2.composeRef)(children.ref,nodeRef)}));return children});require.displayName="Align";exports.default=
require}
//# sourceMappingURL=module$node_modules$rc_align$lib$Align.js.map
