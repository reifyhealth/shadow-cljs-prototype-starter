shadow$provide.module$node_modules$antd$lib$upload$Upload=function(global,require,module,exports){module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),
_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=module(require("module$node_modules$react$index")),_rcUpload=global(require("module$node_modules$rc_upload$lib$index")),_useMergedState3=global(require("module$node_modules$rc_util$lib$hooks$useMergedState")),
_classnames=global(require("module$node_modules$classnames$index"));module=global(require("module$node_modules$antd$lib$upload$Dragger"));var _UploadList=global(require("module$node_modules$antd$lib$upload$UploadList$index")),_utils=require("module$node_modules$antd$lib$upload$utils"),_LocaleReceiver=global(require("module$node_modules$antd$lib$locale_provider$LocaleReceiver")),_default2=global(require("module$node_modules$antd$lib$locale$default")),_configProvider=require("module$node_modules$antd$lib$config_provider$index"),
_devWarning=global(require("module$node_modules$antd$lib$_util$devWarning")),__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,
rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},LIST_IGNORE="__LIST_IGNORE_".concat(Date.now(),"__");require=React.forwardRef(function(props,ref){var _classNames2,fileList=props.fileList,defaultFileList=props.defaultFileList,onRemove=props.onRemove,showUploadList=props.showUploadList,listType=props.listType,onPreview=props.onPreview,onDownload=props.onDownload,onChange=props.onChange,previewFile=props.previewFile,disabled=props.disabled,propLocale=props.locale,iconRender=
props.iconRender,isImageUrl=props.isImageUrl,progress=props.progress,customizePrefixCls=props.prefixCls,className=props.className,type=props.type,children=props.children,style=props.style,itemRender=props.itemRender,maxCount=props.maxCount;defaultFileList=(0,_useMergedState3["default"])(defaultFileList||[],{value:fileList,postState:function(list){return null!==list&&void 0!==list?list:[]}});defaultFileList=(0,_slicedToArray2["default"])(defaultFileList,2);var mergedFileList=defaultFileList[0],setMergedFileList=
defaultFileList[1];defaultFileList=React.useState("drop");var _React$useState2=(0,_slicedToArray2["default"])(defaultFileList,2);defaultFileList=_React$useState2[0];var setDragState=_React$useState2[1],upload=React.useRef();React.useEffect(function(){(0,_devWarning["default"])("fileList"in props||!("value"in props),"Upload","`value` is not a valid prop, do you mean `fileList`?");(0,_devWarning["default"])(!("transformFile"in props),"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly.")},
[]);React.useEffect(function(){var timestamp=Date.now();(fileList||[]).forEach(function(file,index){file.uid||(file.uid="__AUTO__".concat(timestamp,"_").concat(index,"__"))})},[fileList]);var onInternalChange=function(file,changedFileList,event){changedFileList=(0,_toConsumableArray2["default"])(changedFileList);1===maxCount?changedFileList=changedFileList.slice(-1):maxCount&&(changedFileList=changedFileList.slice(0,maxCount));setMergedFileList(changedFileList);file={file:file,fileList:changedFileList};
event&&(file.event=event);null===onChange||void 0===onChange?void 0:onChange(file)},onBatchStart=function(batchFileInfoList){var filteredFileInfoList=batchFileInfoList.filter(function(info){return!info.file[LIST_IGNORE]});if(filteredFileInfoList.length){batchFileInfoList=filteredFileInfoList.map(function(info){return(0,_utils.file2Obj)(info.file)});var newFileList=(0,_toConsumableArray2["default"])(mergedFileList);batchFileInfoList.forEach(function(fileObj){newFileList=(0,_utils.updateFileList)(fileObj,
newFileList)});batchFileInfoList.forEach(function(fileObj,index){var triggerFileObj=fileObj;filteredFileInfoList[index].parsedFile?fileObj.status="uploading":(index=fileObj.originFileObj,index=new File([index],index.name,{type:index.type}),index.uid=fileObj.uid,triggerFileObj=index);onInternalChange(triggerFileObj,newFileList)})}},onSuccess=function(response,file,xhr){try{"string"===typeof response&&(response=JSON.parse(response))}catch(e){}(0,_utils.getFileItem)(file,mergedFileList)&&(file=(0,_utils.file2Obj)(file),
file.status="done",file.percent=100,file.response=response,file.xhr=xhr,response=(0,_utils.updateFileList)(file,mergedFileList),onInternalChange(file,response))},onProgress=function(e,file){if((0,_utils.getFileItem)(file,mergedFileList)){file=(0,_utils.file2Obj)(file);file.status="uploading";file.percent=e.percent;var nextFileList=(0,_utils.updateFileList)(file,mergedFileList);onInternalChange(file,nextFileList,e)}},onError=function(error,response,file){(0,_utils.getFileItem)(file,mergedFileList)&&
(file=(0,_utils.file2Obj)(file),file.error=error,file.response=response,file.status="error",error=(0,_utils.updateFileList)(file,mergedFileList),onInternalChange(file,error))},handleRemove=function(file){var currentFile;Promise.resolve("function"===typeof onRemove?onRemove(file):onRemove).then(function(ret){var _a;!1!==ret&&(ret=(0,_utils.removeFileItem)(file,mergedFileList))&&(currentFile=(0,_extends2["default"])((0,_extends2["default"])({},file),{status:"removed"}),null===mergedFileList||void 0===
mergedFileList?void 0:mergedFileList.forEach(function(item){var matchKey=void 0!==currentFile.uid?"uid":"name";item[matchKey]===currentFile[matchKey]&&(item.status="removed")}),null===(_a=upload.current)||void 0===_a?void 0:_a.abort(currentFile),onInternalChange(currentFile,ret))})};_React$useState2=function(e){e.stopPropagation();setDragState(e.type)};React.useImperativeHandle(ref,function(){return{onBatchStart:onBatchStart,onSuccess:onSuccess,onProgress:onProgress,onError:onError,fileList:mergedFileList,
upload:upload.current}});var _React$useContext=React.useContext(_configProvider.ConfigContext);ref=_React$useContext.getPrefixCls;_React$useContext=_React$useContext.direction;customizePrefixCls=ref("upload",customizePrefixCls);var rcUploadProps=(0,_extends2["default"])((0,_extends2["default"])({onBatchStart:onBatchStart,onError:onError,onProgress:onProgress,onSuccess:onSuccess},props),{prefixCls:customizePrefixCls,beforeUpload:function(file,fileListArgs){return __awaiter(void 0,void 0,void 0,_regenerator["default"].mark(function _callee(){var beforeUpload,
transformFile,parsedFile,result;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:beforeUpload=props.beforeUpload;transformFile=props.transformFile;parsedFile=file;if(!beforeUpload){_context.next=13;break}_context.next=5;return beforeUpload(file,fileListArgs);case 5:result=_context.sent;if(!1!==result){_context.next=8;break}return _context.abrupt("return",!1);case 8:delete file[LIST_IGNORE];if(result!==LIST_IGNORE){_context.next=12;break}Object.defineProperty(file,
LIST_IGNORE,{value:!0,configurable:!0});return _context.abrupt("return",!1);case 12:"object"===(0,_typeof2["default"])(result)&&result&&(parsedFile=result);case 13:if(!transformFile){_context.next=17;break}_context.next=16;return transformFile(parsedFile);case 16:parsedFile=_context.sent;case 17:return _context.abrupt("return",parsedFile);case 18:case "end":return _context.stop()}},_callee)}))},onChange:void 0});delete rcUploadProps.className;delete rcUploadProps.style;children&&!disabled||delete rcUploadProps.id;
ref=function(button){return showUploadList?React.createElement(_LocaleReceiver["default"],{componentName:"Upload",defaultLocale:_default2["default"].Upload},function(locale){var _ref="boolean"===typeof showUploadList?{}:showUploadList,showRemoveIcon=_ref.showRemoveIcon;return React.createElement(_UploadList["default"],{listType:listType,items:mergedFileList,previewFile:previewFile,onPreview:onPreview,onDownload:onDownload,onRemove:handleRemove,showRemoveIcon:!disabled&&showRemoveIcon,showPreviewIcon:_ref.showPreviewIcon,
showDownloadIcon:_ref.showDownloadIcon,removeIcon:_ref.removeIcon,downloadIcon:_ref.downloadIcon,iconRender:iconRender,locale:(0,_extends2["default"])((0,_extends2["default"])({},locale),propLocale),isImageUrl:isImageUrl,progress:progress,appendAction:button,itemRender:itemRender})}):button};if("drag"===type){var _classNames;className=(0,_classnames["default"])(customizePrefixCls,(_classNames={},(0,_defineProperty2["default"])(_classNames,"".concat(customizePrefixCls,"-drag"),!0),(0,_defineProperty2["default"])(_classNames,
"".concat(customizePrefixCls,"-drag-uploading"),mergedFileList.some(function(file){return"uploading"===file.status})),(0,_defineProperty2["default"])(_classNames,"".concat(customizePrefixCls,"-drag-hover"),"dragover"===defaultFileList),(0,_defineProperty2["default"])(_classNames,"".concat(customizePrefixCls,"-disabled"),disabled),(0,_defineProperty2["default"])(_classNames,"".concat(customizePrefixCls,"-rtl"),"rtl"===_React$useContext),_classNames),className);return React.createElement("span",null,
React.createElement("div",{className:className,onDrop:_React$useState2,onDragOver:_React$useState2,onDragLeave:_React$useState2,style:style},React.createElement(_rcUpload["default"],(0,_extends2["default"])({},rcUploadProps,{ref:upload,className:"".concat(customizePrefixCls,"-btn")}),React.createElement("div",{className:"".concat(customizePrefixCls,"-drag-container")},children))),ref())}style=(0,_classnames["default"])(customizePrefixCls,(_classNames2={},(0,_defineProperty2["default"])(_classNames2,
"".concat(customizePrefixCls,"-select"),!0),(0,_defineProperty2["default"])(_classNames2,"".concat(customizePrefixCls,"-select-").concat(listType),!0),(0,_defineProperty2["default"])(_classNames2,"".concat(customizePrefixCls,"-disabled"),disabled),(0,_defineProperty2["default"])(_classNames2,"".concat(customizePrefixCls,"-rtl"),"rtl"===_React$useContext),_classNames2));children=React.createElement("div",{className:style,style:children?void 0:{display:"none"}},React.createElement(_rcUpload["default"],
(0,_extends2["default"])({},rcUploadProps,{ref:upload})));return"picture-card"===listType?React.createElement("span",{className:(0,_classnames["default"])("".concat(customizePrefixCls,"-picture-card-wrapper"),className)},ref(children)):React.createElement("span",{className:className},children,ref())});require.Dragger=module["default"];require.LIST_IGNORE=LIST_IGNORE;require.displayName="Upload";require.defaultProps={type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",
className:"",disabled:!1,supportServerRender:!0};exports["default"]=require}
//# sourceMappingURL=module$node_modules$antd$lib$upload$Upload.js.map
