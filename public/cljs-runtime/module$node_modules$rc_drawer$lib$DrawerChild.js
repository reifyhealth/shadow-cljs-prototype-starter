shadow$provide.module$node_modules$rc_drawer$lib$DrawerChild=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=module(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=
module(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=module(require("module$node_modules$$babel$runtime$helpers$createSuper")),React=global(require("module$node_modules$react$index")),_classnames2=module(require("module$node_modules$classnames$index")),_getScrollBarSize=module(require("module$node_modules$rc_util$lib$getScrollBarSize")),_KeyCode=module(require("module$node_modules$rc_util$lib$KeyCode")),_omit=module(require("module$node_modules$rc_util$lib$omit")),
_utils=require("module$node_modules$rc_drawer$lib$utils"),currentDrawer={};require=function(_React$Component){function DrawerChild(props){(0,_classCallCheck2.default)(this,DrawerChild);var _this=_super.call(this,props);_this.domFocus=function(){_this.dom&&_this.dom.focus()};_this.removeStartHandler=function(e){1<e.touches.length||(_this.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})};_this.removeMoveHandler=function(e){if(!(1<e.changedTouches.length)){var currentTarget=e.currentTarget,
differX=e.changedTouches[0].clientX-_this.startPos.x,differY=e.changedTouches[0].clientY-_this.startPos.y;(currentTarget===_this.maskDom||currentTarget===_this.handlerDom||currentTarget===_this.contentDom&&(0,_utils.getTouchParentScroll)(currentTarget,e.target,differX,differY))&&e.cancelable&&e.preventDefault()}};_this.transitionEnd=function(e){e=e.target;(0,_utils.removeEventListener)(e,_utils.transitionEnd,_this.transitionEnd);e.style.transition=""};_this.onKeyDown=function(e){if(e.keyCode===_KeyCode.default.ESC){var onClose=
_this.props.onClose;e.stopPropagation();onClose&&onClose(e)}};_this.onWrapperTransitionEnd=function(e){var _this$props=_this.props,open=_this$props.open;_this$props=_this$props.afterVisibleChange;e.target===_this.contentWrapper&&e.propertyName.match(/transform$/)&&(_this.dom.style.transition="",!open&&_this.getCurrentDrawerSome()&&(document.body.style.overflowX="",_this.maskDom&&(_this.maskDom.style.left="",_this.maskDom.style.width="")),_this$props&&_this$props(!!open))};_this.openLevelTransition=
function(){var _this$props2=_this.props,open=_this$props2.open,width=_this$props2.width;_this$props2=_this$props2.height;var _this$getHorizontalBo=_this.getHorizontalBoolAndPlacementName(),isHorizontal=_this$getHorizontalBo.isHorizontal;_this$getHorizontalBo=_this$getHorizontalBo.placementName;var contentValue=_this.contentDom?_this.contentDom.getBoundingClientRect()[isHorizontal?"width":"height"]:0;_this.setLevelAndScrolling(open,_this$getHorizontalBo,(isHorizontal?width:_this$props2)||contentValue)};
_this.setLevelTransform=function(open,placementName,value,right){var _this$props3=_this.props,placement=_this$props3.placement,levelMove=_this$props3.levelMove,duration=_this$props3.duration,ease=_this$props3.ease,showMask=_this$props3.showMask;_this.levelDom.forEach(function(dom){dom.style.transition="transform ".concat(duration," ").concat(ease);(0,_utils.addEventListener)(dom,_utils.transitionEnd,_this.transitionEnd);var levelValue=open?value:0;levelMove&&(levelValue=(0,_utils.transformArguments)(levelMove,
{target:dom,open:open}),levelValue=open?levelValue[0]:levelValue[1]||0);var $value="number"===typeof levelValue?"".concat(levelValue,"px"):levelValue;$value="left"===placement||"top"===placement?$value:"-".concat($value);$value=showMask&&"right"===placement&&right?"calc(".concat($value," + ").concat(right,"px)"):$value;dom.style.transform=levelValue?"".concat(placementName,"(").concat($value,")"):""})};_this.setLevelAndScrolling=function(open,placementName,value){var onChange=_this.props.onChange;
if(!_utils.windowIsUndefined){var right=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?(0,_getScrollBarSize.default)(!0):0;_this.setLevelTransform(open,placementName,value,right);_this.toggleScrollingToDrawerAndBody(right)}onChange&&onChange(open)};_this.toggleScrollingToDrawerAndBody=function(right){var _this$props4=_this.props,getContainer=_this$props4.getContainer,showMask=_this$props4.showMask;_this$props4=_this$props4.open;
if((getContainer=getContainer&&getContainer())&&getContainer.parentNode===document.body&&showMask){var eventArray=["touchstart"];showMask=[document.body,_this.maskDom,_this.handlerDom,_this.contentDom];_this$props4&&"hidden"!==document.body.style.overflow?(right&&_this.addScrollingEffect(right),document.body.style.touchAction="none",showMask.forEach(function(item,i){item&&(0,_utils.addEventListener)(item,eventArray[i]||"touchmove",i?_this.removeMoveHandler:_this.removeStartHandler,_this.passive)})):
_this.getCurrentDrawerSome()&&(document.body.style.touchAction="",right&&_this.remScrollingEffect(right),showMask.forEach(function(item,i){item&&(0,_utils.removeEventListener)(item,eventArray[i]||"touchmove",i?_this.removeMoveHandler:_this.removeStartHandler,_this.passive)}))}};_this.addScrollingEffect=function(right){var _this$props5=_this.props,placement=_this$props5.placement,duration=_this$props5.duration;_this$props5=_this$props5.ease;var widthTransition="width ".concat(duration," ").concat(_this$props5),
transformTransition="transform ".concat(duration," ").concat(_this$props5);_this.dom.style.transition="none";switch(placement){case "right":_this.dom.style.transform="translateX(-".concat(right,"px)");break;case "top":case "bottom":_this.dom.style.width="calc(100% - ".concat(right,"px)"),_this.dom.style.transform="translateZ(0)"}clearTimeout(_this.timeout);_this.timeout=setTimeout(function(){_this.dom&&(_this.dom.style.transition="".concat(transformTransition,",").concat(widthTransition),_this.dom.style.width=
"",_this.dom.style.transform="")})};_this.remScrollingEffect=function(right){var _this$props6=_this.props,placement=_this$props6.placement,duration=_this$props6.duration;_this$props6=_this$props6.ease;_utils.transitionStr&&(document.body.style.overflowX="hidden");_this.dom.style.transition="none";var widthTransition="width ".concat(duration," ").concat(_this$props6),transformTransition="transform ".concat(duration," ").concat(_this$props6);switch(placement){case "left":_this.dom.style.width="100%";
widthTransition="width 0s ".concat(_this$props6," ").concat(duration);break;case "right":_this.dom.style.transform="translateX(".concat(right,"px)");_this.dom.style.width="100%";widthTransition="width 0s ".concat(_this$props6," ").concat(duration);_this.maskDom&&(_this.maskDom.style.left="-".concat(right,"px"),_this.maskDom.style.width="calc(100% + ".concat(right,"px)"));break;case "top":case "bottom":_this.dom.style.width="calc(100% + ".concat(right,"px)");_this.dom.style.height="100%";_this.dom.style.transform=
"translateZ(0)";var heightTransition="height 0s ".concat(_this$props6," ").concat(duration)}clearTimeout(_this.timeout);_this.timeout=setTimeout(function(){_this.dom&&(_this.dom.style.transition="".concat(transformTransition,",").concat(heightTransition?"".concat(heightTransition,","):"").concat(widthTransition),_this.dom.style.transform="",_this.dom.style.width="",_this.dom.style.height="")})};_this.getCurrentDrawerSome=function(){return!Object.keys(currentDrawer).some(function(key){return currentDrawer[key]})};
_this.getLevelDom=function(_ref){var level=_ref.level;_ref=_ref.getContainer;if(!_utils.windowIsUndefined){var container=_ref&&_ref();_ref=container?container.parentNode:null;_this.levelDom=[];"all"===level?(_ref?Array.prototype.slice.call(_ref.children):[]).forEach(function(child){"SCRIPT"!==child.nodeName&&"STYLE"!==child.nodeName&&"LINK"!==child.nodeName&&child!==container&&_this.levelDom.push(child)}):level&&(0,_utils.dataToArray)(level).forEach(function(key){document.querySelectorAll(key).forEach(function(item){_this.levelDom.push(item)})})}};
_this.getHorizontalBoolAndPlacementName=function(){var placement=_this.props.placement;placement="left"===placement||"right"===placement;var placementName="translate".concat(placement?"X":"Y");return{isHorizontal:placement,placementName:placementName}};_this.state={_self:(0,_assertThisInitialized2.default)(_this)};return _this}(0,_inherits2.default)(DrawerChild,_React$Component);var _super=(0,_createSuper2.default)(DrawerChild);(0,_createClass2.default)(DrawerChild,[{key:"componentDidMount",value:function(){var _this2=
this;if(!_utils.windowIsUndefined){var passiveSupported=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){passiveSupported=!0;return null}}))}catch(err){}this.passive=passiveSupported?{passive:!1}:!1}var _this$props7=this.props,open=_this$props7.open,getContainer=_this$props7.getContainer;_this$props7=_this$props7.showMask;getContainer=getContainer&&getContainer();this.drawerId="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",
Math.round(9*Math.random()).toString())).toString(16));this.getLevelDom(this.props);if(open&&(getContainer&&getContainer.parentNode===document.body&&(currentDrawer[this.drawerId]=open),this.openLevelTransition(),this.forceUpdate(function(){_this2.domFocus()}),_this$props7)){var _this$props$scrollLoc;null===(_this$props$scrollLoc=this.props.scrollLocker)||void 0===_this$props$scrollLoc?void 0:_this$props$scrollLoc.lock()}}},{key:"componentDidUpdate",value:function(prevProps){var _this$props8=this.props,
open=_this$props8.open,getContainer=_this$props8.getContainer,scrollLocker=_this$props8.scrollLocker;_this$props8=_this$props8.showMask;getContainer=getContainer&&getContainer();open!==prevProps.open&&(getContainer&&getContainer.parentNode===document.body&&(currentDrawer[this.drawerId]=!!open),this.openLevelTransition(),open?(this.domFocus(),_this$props8&&(null===scrollLocker||void 0===scrollLocker?void 0:scrollLocker.lock())):null===scrollLocker||void 0===scrollLocker?void 0:scrollLocker.unLock())}},
{key:"componentWillUnmount",value:function(){var _this$props9=this.props,open=_this$props9.open;_this$props9=_this$props9.scrollLocker;delete currentDrawer[this.drawerId];open&&(this.setLevelTransform(!1),document.body.style.touchAction="");null===_this$props9||void 0===_this$props9?void 0:_this$props9.unLock()}},{key:"render",value:function(){var _classnames,_this3=this,_this$props10=this.props,className=_this$props10.className,children=_this$props10.children,style=_this$props10.style,width=_this$props10.width,
height=_this$props10.height,$open=_this$props10.open,prefixCls=_this$props10.prefixCls,placement=_this$props10.placement,handler=_this$props10.handler,showMask=_this$props10.showMask,maskClosable=_this$props10.maskClosable,maskStyle=_this$props10.maskStyle,onClose=_this$props10.onClose,onHandleClick=_this$props10.onHandleClick,keyboard=_this$props10.keyboard,contentWrapperStyle=_this$props10.contentWrapperStyle;_this$props10=(0,_objectWithoutProperties2.default)(_this$props10,"className children style width height defaultOpen open prefixCls placement level levelMove ease duration getContainer handler onChange afterVisibleChange showMask maskClosable maskStyle onClose onHandleClick keyboard getOpenCount scrollLocker contentWrapperStyle".split(" "));
$open=this.dom?$open:!1;className=(0,_classnames2.default)(prefixCls,(_classnames={},(0,_defineProperty2.default)(_classnames,"".concat(prefixCls,"-").concat(placement),!0),(0,_defineProperty2.default)(_classnames,"".concat(prefixCls,"-open"),$open),(0,_defineProperty2.default)(_classnames,className||"",!!className),(0,_defineProperty2.default)(_classnames,"no-mask",!showMask),_classnames));_classnames=this.getHorizontalBoolAndPlacementName().placementName;placement="left"===placement||"top"===placement?
"-100%":"100%";placement=$open?"":"".concat(_classnames,"(").concat(placement,")");_classnames=handler&&React.cloneElement(handler,{onClick:function(e){if(handler.props.onClick)handler.props.onClick();onHandleClick&&onHandleClick(e)},ref:function(c){_this3.handlerDom=c}});return React.createElement("div",(0,_extends2.default)({},(0,_omit.default)(_this$props10,["switchScrollingEffect"]),{tabIndex:-1,className:className,style:style,ref:function(c){_this3.dom=c},onKeyDown:$open&&keyboard?this.onKeyDown:
void 0,onTransitionEnd:this.onWrapperTransitionEnd}),showMask&&React.createElement("div",{className:"".concat(prefixCls,"-mask"),onClick:maskClosable?onClose:void 0,style:maskStyle,ref:function(c){_this3.maskDom=c}}),React.createElement("div",{className:"".concat(prefixCls,"-content-wrapper"),style:(0,_objectSpread2.default)({transform:placement,msTransform:placement,width:(0,_utils.isNumeric)(width)?"".concat(width,"px"):width,height:(0,_utils.isNumeric)(height)?"".concat(height,"px"):height},contentWrapperStyle),
ref:function(c){_this3.contentWrapper=c}},React.createElement("div",{className:"".concat(prefixCls,"-content"),ref:function(c){_this3.contentDom=c},onTouchStart:$open&&showMask?this.removeStartHandler:void 0,onTouchMove:$open&&showMask?this.removeMoveHandler:void 0},children),_classnames))}}],[{key:"getDerivedStateFromProps",value:function(props,_ref2){var prevProps=_ref2.prevProps;_ref2=_ref2._self;var nextState={prevProps:props};if(void 0!==prevProps){var level=props.level;props.placement!==prevProps.placement&&
(_ref2.contentDom=null);level!==prevProps.level&&_ref2.getLevelDom(props)}return nextState}}]);return DrawerChild}(React.Component);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_drawer$lib$DrawerChild.js.map
