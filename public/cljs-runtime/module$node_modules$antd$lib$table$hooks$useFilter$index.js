shadow$provide.module$node_modules$antd$lib$table$hooks$useFilter$index=function(global,require,module,exports){function collectFilterStates(columns,init,pos){var filterStates=[];(columns||[]).forEach(function(column,index){var _a;index=(0,_util.getColumnPos)(index,pos);if("children"in column)filterStates=[].concat((0,_toConsumableArray2["default"])(filterStates),(0,_toConsumableArray2["default"])(collectFilterStates(column.children,init,index)));else if(column.filters||"filterDropdown"in column||
"onFilter"in column)if("filteredValue"in column){var filteredValues=column.filteredValue;"filterDropdown"in column||(filteredValues=null!==(_a=null===filteredValues||void 0===filteredValues?void 0:filteredValues.map(String))&&void 0!==_a?_a:filteredValues);filterStates.push({column:column,key:(0,_util.getColumnKey)(column,index),filteredKeys:filteredValues,forceFiltered:column.filtered})}else filterStates.push({column:column,key:(0,_util.getColumnKey)(column,index),filteredKeys:init&&column.defaultFilteredValue?
column.defaultFilteredValue:void 0,forceFiltered:column.filtered})});return filterStates}function injectFilter(prefixCls,dropdownPrefixCls,columns,filterStates,triggerFilter,getPopupContainer,locale,pos){return columns.map(function(column,index){index=(0,_util.getColumnPos)(index,pos);var _column$filterMultipl=column.filterMultiple,filterMultiple=void 0===_column$filterMultipl?!0:_column$filterMultipl,newColumn=column;if(newColumn.filters||newColumn.filterDropdown){var columnKey=(0,_util.getColumnKey)(newColumn,
index),filterState=filterStates.find(function(_ref){return columnKey===_ref.key});newColumn=(0,_extends2["default"])((0,_extends2["default"])({},newColumn),{title:function(renderProps){return React.createElement(_FilterDropdown["default"],{prefixCls:"".concat(prefixCls,"-filter"),dropdownPrefixCls:dropdownPrefixCls,column:newColumn,columnKey:columnKey,filterState:filterState,filterMultiple:filterMultiple,triggerFilter:triggerFilter,locale:locale,getPopupContainer:getPopupContainer},(0,_util.renderColumnTitle)(column.title,
renderProps))}})}"children"in newColumn&&(newColumn=(0,_extends2["default"])((0,_extends2["default"])({},newColumn),{children:injectFilter(prefixCls,dropdownPrefixCls,newColumn.children,filterStates,triggerFilter,getPopupContainer,locale,index)}));return newColumn})}function flattenKeys(filters){var keys=[];(filters||[]).forEach(function(_ref2){var children=_ref2.children;keys.push(_ref2.value);children&&(keys=[].concat((0,_toConsumableArray2["default"])(keys),(0,_toConsumableArray2["default"])(flattenKeys(children))))});
return keys}function generateFilterInfo(filterStates){var currentFilters={};filterStates.forEach(function(_ref3){var key=_ref3.key,filteredKeys=_ref3.filteredKeys;_ref3=_ref3.column;var filters=_ref3.filters;_ref3.filterDropdown?currentFilters[key]=filteredKeys||null:Array.isArray(filteredKeys)?(_ref3=flattenKeys(filters),currentFilters[key]=_ref3.filter(function(originKey){return filteredKeys.includes(String(originKey))})):currentFilters[key]=null});return currentFilters}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");
module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getFilterData=function(data,filterStates){return filterStates.reduce(function(currentData,filterState){var _filterState$column=filterState.column,onFilter=_filterState$column.onFilter,filters=_filterState$column.filters,filteredKeys=filterState.filteredKeys;return onFilter&&filteredKeys&&filteredKeys.length?currentData.filter(function(record){return filteredKeys.some(function(key){var keys=
flattenKeys(filters),keyIndex=keys.findIndex(function(k){return String(k)===String(key)});return onFilter(-1!==keyIndex?keys[keyIndex]:key,record)})}):currentData},data)};exports["default"]=void 0;var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),React=global(require("module$node_modules$react$index")),
_util=require("module$node_modules$antd$lib$table$util"),_FilterDropdown=module(require("module$node_modules$antd$lib$table$hooks$useFilter$FilterDropdown"));exports["default"]=function(_ref4){var prefixCls=_ref4.prefixCls,dropdownPrefixCls=_ref4.dropdownPrefixCls,mergedColumns=_ref4.mergedColumns,onFilterChange=_ref4.onFilterChange,getPopupContainer=_ref4.getPopupContainer,tableLocale=_ref4.locale;_ref4=React.useState(collectFilterStates(mergedColumns,!0));_ref4=(0,_slicedToArray2["default"])(_ref4,
2);var filterStates=_ref4[0],setFilterStates=_ref4[1],mergedFilterStates=React.useMemo(function(){var collectedStates=collectFilterStates(mergedColumns,!1);return collectedStates.every(function(_ref5){return void 0===_ref5.filteredKeys})?filterStates:collectedStates},[mergedColumns,filterStates]);_ref4=React.useCallback(function(){return generateFilterInfo(mergedFilterStates)},[mergedFilterStates]);var triggerFilter=function(filterState){var newFilterStates=mergedFilterStates.filter(function(_ref6){return _ref6.key!==
filterState.key});newFilterStates.push(filterState);setFilterStates(newFilterStates);onFilterChange(generateFilterInfo(newFilterStates),newFilterStates)};return[function(innerColumns){return injectFilter(prefixCls,dropdownPrefixCls,innerColumns,mergedFilterStates,triggerFilter,getPopupContainer,tableLocale)},mergedFilterStates,_ref4]}}
//# sourceMappingURL=module$node_modules$antd$lib$table$hooks$useFilter$index.js.map
