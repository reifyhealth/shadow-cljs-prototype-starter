shadow$provide.module$node_modules$rc_slider$lib$Range=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=module(require("module$node_modules$$babel$runtime$helpers$createSuper")),_react=module(require("module$node_modules$react$index")),
_classnames=module(require("module$node_modules$classnames$index")),_Track=module(require("module$node_modules$rc_slider$lib$common$Track"));module=module(require("module$node_modules$rc_slider$lib$common$createSlider"));var utils=global(require("module$node_modules$rc_slider$lib$utils")),_trimAlignValue=function(_ref){var handle=_ref.handle,bounds=_ref.bounds,props=_ref.props,allowCross=props.allowCross,thershold=Number(props.pushable),valNotConflict=_ref=utils.ensureValueInRange(_ref.value,props);
allowCross||null==handle||void 0===bounds||(0<handle&&_ref<=bounds[handle-1]+thershold&&(valNotConflict=bounds[handle-1]+thershold),handle<bounds.length-1&&_ref>=bounds[handle+1]-thershold&&(valNotConflict=bounds[handle+1]-thershold));return utils.ensureValuePrecision(valNotConflict,props)};require=function(_React$Component){function Range(props){(0,_classCallCheck2.default)(this,Range);var _this=_super.call(this,props);_this.positionGetValue=function(position){var bounds=_this.getValue();position=
_this.calcValueByPos(position);var closestBound=_this.getClosestBound(position);closestBound=_this.getBoundNeedMoving(position,closestBound);if(position===bounds[closestBound])return null;bounds=(0,_toConsumableArray2.default)(bounds);bounds[closestBound]=position;return bounds};_this.onEnd=function(force){var handle=_this.state.handle;_this.removeDocumentEvents();handle||(_this.dragTrack=!1);if(null!==handle||force)_this.props.onAfterChange(_this.getValue());_this.setState({handle:null})};var count=
props.count,min=props.min,max=props.max;count=Array.apply(void 0,(0,_toConsumableArray2.default)(Array(count+1))).map(function(){return min});count="defaultValue"in props?props.defaultValue:count;count=(void 0!==props.value?props.value:count).map(function(v,i){return _trimAlignValue({value:v,handle:i,props:props})});_this.state={handle:null,recent:count[0]===max?0:count.length-1,bounds:count};return _this}(0,_inherits2.default)(Range,_React$Component);var _super=(0,_createSuper2.default)(Range);(0,
_createClass2.default)(Range,[{key:"calcValueByPos",value:function(value){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(value){return 0}},{key:"saveHandle",value:function(index,h){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this,_this$props=this.props,onChange=_this$props.onChange,max=_this$props.max;if("min"in this.props||"max"in this.props)if(_this$props.min!==prevProps.min||
max!==prevProps.max)prevProps=_this$props.value||prevState.bounds,prevProps.some(function(v){return utils.isValueOutOfRange(v,_this2.props)})&&(prevProps=prevProps.map(function(v){return utils.ensureValueInRange(v,_this2.props)}),onChange(prevProps))}},{key:"onChange",value:function(state){var props=this.props;if("value"in props){var controlledState={};["handle","recent"].forEach(function(item){void 0!==state[item]&&(controlledState[item]=state[item])});Object.keys(controlledState).length&&this.setState(controlledState)}else this.setState(state);
var changedValue=(0,_objectSpread2.default)((0,_objectSpread2.default)({},this.state),state).bounds;props.onChange(changedValue)}},{key:"onStart",value:function(position){var props=this.props,state=this.state,bounds=this.getValue();props.onBeforeChange(bounds);this.startValue=props=this.calcValueByPos(position);this.startPosition=position;position=this.getClosestBound(props);this.prevMovedHandleIndex=this.getBoundNeedMoving(props,position);this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});
props!==bounds[this.prevMovedHandleIndex]&&(state=(0,_toConsumableArray2.default)(state.bounds),state[this.prevMovedHandleIndex]=props,this.onChange({bounds:state}))}},{key:"onMove",value:function(e,position,dragTrack,startBounds){utils.pauseEvent(e);e=this.state;var props=this.props,maxValue=props.max||100,minValue=props.min||0;if(dragTrack){position=props.vertical?-position:position;position=props.reverse?-position:position;dragTrack=maxValue-Math.max.apply(Math,(0,_toConsumableArray2.default)(startBounds));
props=minValue-Math.min.apply(Math,(0,_toConsumableArray2.default)(startBounds));var ratio=Math.min(Math.max(position/(this.getSliderLength()/100),props),dragTrack),nextBounds=startBounds.map(function(v){return Math.floor(Math.max(Math.min(v+ratio,maxValue),minValue))});if(e.bounds.map(function(c,i){return c===nextBounds[i]}).some(function(c){return!c}))this.onChange({bounds:nextBounds})}else startBounds=this.calcValueByPos(position),startBounds!==e.bounds[e.handle]&&this.moveTo(startBounds)}},{key:"onKeyboard",
value:function(e){var _this$props2=this.props;if(_this$props2=utils.getKeyboardValueMutator(e,_this$props2.vertical,_this$props2.reverse)){utils.pauseEvent(e);var state=this.state,props=this.props,handle=state.handle;e=state.bounds[null===handle?state.recent:handle];_this$props2=_this$props2(e,props);_this$props2=_trimAlignValue({value:_this$props2,handle:handle,bounds:state.bounds,props:props});_this$props2!==e&&this.moveTo(_this$props2,!0)}}},{key:"getValue",value:function(){return this.state.bounds}},
{key:"getClosestBound",value:function(value){for(var bounds=this.state.bounds,closestBound=0,i=1;i<bounds.length-1;i+=1)value>=bounds[i]&&(closestBound=i);Math.abs(bounds[closestBound+1]-value)<Math.abs(bounds[closestBound]-value)&&(closestBound+=1);return closestBound}},{key:"getBoundNeedMoving",value:function(value,closestBound){var _this$state=this.state,bounds=_this$state.bounds;_this$state=_this$state.recent;var boundNeedMoving=closestBound,isAtTheSamePoint=bounds[closestBound+1]===bounds[closestBound];
isAtTheSamePoint&&bounds[_this$state]===bounds[closestBound]&&(boundNeedMoving=_this$state);isAtTheSamePoint&&value!==bounds[closestBound+1]&&(boundNeedMoving=value<bounds[closestBound+1]?closestBound:closestBound+1);return boundNeedMoving}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var bounds=this.state.bounds;return bounds[bounds.length-1]}},{key:"getPoints",value:function(){var _this$props3=this.props,marks=_this$props3.marks,step=
_this$props3.step,min=_this$props3.min;_this$props3=_this$props3.max;var cache=this.internalPointsCache;if(!cache||cache.marks!==marks||cache.step!==step){cache=(0,_objectSpread2.default)({},marks);if(null!==step)for(;min<=_this$props3;min+=step)cache[min]=min;min=Object.keys(cache).map(parseFloat);min.sort(function(a,b){return a-b});this.internalPointsCache={marks:marks,step:step,points:min}}return this.internalPointsCache.points}},{key:"moveTo",value:function(value,isFromKeyboardEvent){var _this3=
this,state=this.state,props=this.props,nextBounds=(0,_toConsumableArray2.default)(state.bounds);state=null===state.handle?state.recent:state.handle;nextBounds[state]=value;var nextHandle=state;!1!==props.pushable?this.pushSurroundingHandles(nextBounds,nextHandle):props.allowCross&&(nextBounds.sort(function(a,b){return a-b}),nextHandle=nextBounds.indexOf(value));this.onChange({recent:nextHandle,handle:nextHandle,bounds:nextBounds});isFromKeyboardEvent&&(this.props.onAfterChange(nextBounds),this.setState({},
function(){_this3.handlesRefs[nextHandle].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(bounds,handle){var value=bounds[handle],threshold=Number(this.props.pushable),direction=0;bounds[handle+1]-value<threshold&&(direction=1);value-bounds[handle-1]<threshold&&(direction=-1);if(0!==direction){var nextHandle=handle+direction;this.pushHandle(bounds,nextHandle,direction,threshold-direction*(bounds[nextHandle]-value))||(bounds[handle]=bounds[nextHandle]-direction*threshold)}}},
{key:"pushHandle",value:function(bounds,handle,direction,amount){for(var originalValue=bounds[handle],currentValue=bounds[handle];direction*(currentValue-originalValue)<amount;){if(!this.pushHandleOnePoint(bounds,handle,direction))return bounds[handle]=originalValue,!1;currentValue=bounds[handle]}return!0}},{key:"pushHandleOnePoint",value:function(bounds,handle,direction){var points=this.getPoints(),nextPointIndex=points.indexOf(bounds[handle])+direction;if(nextPointIndex>=points.length||0>nextPointIndex)return!1;
var nextHandle=handle+direction;points=points[nextPointIndex];if(!this.pushHandle(bounds,nextHandle,direction,Number(this.props.pushable)-direction*(bounds[nextHandle]-points)))return!1;bounds[handle]=points;return!0}},{key:"trimAlignValue",value:function(value){var _this$state2=this.state;return _trimAlignValue({value:value,handle:_this$state2.handle,bounds:_this$state2.bounds,props:this.props})}},{key:"render",value:function(){var _this4=this,_this$state3=this.state,handle=_this$state3.handle;_this$state3=
_this$state3.bounds;var _this$props4=this.props,prefixCls=_this$props4.prefixCls,vertical=_this$props4.vertical,included=_this$props4.included,disabled=_this$props4.disabled,min=_this$props4.min,max=_this$props4.max,reverse=_this$props4.reverse,handleGenerator=_this$props4.handle,trackStyle=_this$props4.trackStyle,handleStyle=_this$props4.handleStyle,tabIndex=_this$props4.tabIndex,ariaLabelGroupForHandles=_this$props4.ariaLabelGroupForHandles,ariaLabelledByGroupForHandles=_this$props4.ariaLabelledByGroupForHandles,
ariaValueTextFormatterGroupForHandles=_this$props4.ariaValueTextFormatterGroupForHandles,offsets=_this$state3.map(function(v){return _this4.calcOffset(v)}),handleClassName="".concat(prefixCls,"-handle");_this$props4=_this$state3.map(function(v,i){var _classNames,mergedTabIndex=tabIndex[i]||0;if(disabled||null===tabIndex[i])mergedTabIndex=null;var dragging=handle===i;return handleGenerator({className:(0,_classnames.default)((_classNames={},(0,_defineProperty2.default)(_classNames,handleClassName,!0),
(0,_defineProperty2.default)(_classNames,"".concat(handleClassName,"-").concat(i+1),!0),(0,_defineProperty2.default)(_classNames,"".concat(handleClassName,"-dragging"),dragging),_classNames)),prefixCls:prefixCls,vertical:vertical,dragging:dragging,offset:offsets[i],value:v,index:i,tabIndex:mergedTabIndex,min:min,max:max,reverse:reverse,disabled:disabled,style:handleStyle[i],ref:function(h){return _this4.saveHandle(i,h)},ariaLabel:ariaLabelGroupForHandles[i],ariaLabelledBy:ariaLabelledByGroupForHandles[i],
ariaValueTextFormatter:ariaValueTextFormatterGroupForHandles[i]})});return{tracks:_this$state3.slice(0,-1).map(function(_,index){var _classNames2;_=index+1;var trackClassName=(0,_classnames.default)((_classNames2={},(0,_defineProperty2.default)(_classNames2,"".concat(prefixCls,"-track"),!0),(0,_defineProperty2.default)(_classNames2,"".concat(prefixCls,"-track-").concat(_),!0),_classNames2));return _react.default.createElement(_Track.default,{className:trackClassName,vertical:vertical,reverse:reverse,
included:included,offset:offsets[_-1],length:offsets[_]-offsets[_-1],style:trackStyle[index],key:_})}),handles:_this$props4}}}],[{key:"getDerivedStateFromProps",value:function(props,state){if(!("value"in props||"min"in props||"max"in props))return null;var value=props.value||state.bounds,nextBounds=value.map(function(v,i){return _trimAlignValue({value:v,handle:i,bounds:state.bounds,props:props})});if(state.bounds.length===nextBounds.length){if(nextBounds.every(function(v,i){return v===state.bounds[i]}))return null}else nextBounds=
value.map(function(v,i){return _trimAlignValue({value:v,handle:i,props:props})});return(0,_objectSpread2.default)((0,_objectSpread2.default)({},state),{},{bounds:nextBounds})}}]);return Range}(_react.default.Component);require.displayName="Range";require.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};require=(0,module.default)(require);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_slider$lib$Range.js.map
