shadow$provide.module$node_modules$rc_menu$lib$SubPopupMenu=function(global,require,module,exports){function allDisabled(arr){return arr.length?arr.every(function(c){return!!c.props.disabled}):!0}function updateActiveKey(store,menuId,activeKey){var state=store.getState();store.setState({activeKey:(0,_objectSpread4.default)((0,_objectSpread4.default)({},state.activeKey),{},(0,_defineProperty2.default)({},menuId,activeKey))})}function getEventKey(props){return props.eventKey||"0-menu-"}function getActiveKey(props,
originalActiveKey){var activeKey=originalActiveKey;originalActiveKey=props.children;var eventKey=props.eventKey;if(activeKey){var found;(0,_util.loopMenuItem)(originalActiveKey,function(c,i){c&&c.props&&!c.props.disabled&&activeKey===(0,_util.getKeyFromChildrenIndex)(c,eventKey,i)&&(found=!0)});if(found)return activeKey}activeKey=null;props.defaultActiveFirst&&(0,_util.loopMenuItem)(originalActiveKey,function(c,i){activeKey||!c||c.props.disabled||(activeKey=(0,_util.getKeyFromChildrenIndex)(c,eventKey,
i))});return activeKey}function saveRef(c){if(c){var index=this.instanceArray.indexOf(c);-1!==index?this.instanceArray[index]=c:this.instanceArray.push(c)}}module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getActiveKey=getActiveKey;exports.saveRef=saveRef;exports.default=exports.SubPopupMenu=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),
_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=global(require("module$node_modules$$babel$runtime$helpers$createSuper")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),
_objectSpread4=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),React=module(require("module$node_modules$react$index"));module=require("module$node_modules$mini_store$cjs$index");var _KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),_createChainedFunction=global(require("module$node_modules$rc_util$lib$createChainedFunction")),_toArray=global(require("module$node_modules$rc_util$lib$Children$toArray")),_shallowequal=global(require("module$node_modules$shallowequal$index")),
_classnames=global(require("module$node_modules$classnames$index")),_util=require("module$node_modules$rc_menu$lib$util"),_DOMWrap=global(require("module$node_modules$rc_menu$lib$DOMWrap"));require=function(_React$Component){function SubPopupMenu(props$jscomp$0){(0,_classCallCheck2.default)(this,SubPopupMenu);var _this=_super.call(this,props$jscomp$0);_this.onKeyDown=function(e,callback){var keyCode=e.keyCode,handled;_this.getFlatInstanceArray().forEach(function(obj){obj&&obj.props.active&&obj.onKeyDown&&
(handled=obj.onKeyDown(e))});if(handled)return 1;var activeItem=null;if(keyCode===_KeyCode.default.UP||keyCode===_KeyCode.default.DOWN)activeItem=_this.step(keyCode===_KeyCode.default.UP?-1:1);if(activeItem)return e.preventDefault(),updateActiveKey(_this.props.store,getEventKey(_this.props),activeItem.props.eventKey),"function"===typeof callback&&callback(activeItem),1};_this.onItemHover=function(e){var key=e.key;e=e.hover;updateActiveKey(_this.props.store,getEventKey(_this.props),e?key:null)};_this.onDeselect=
function(selectInfo){_this.props.onDeselect(selectInfo)};_this.onSelect=function(selectInfo){_this.props.onSelect(selectInfo)};_this.onClick=function(e){_this.props.onClick(e)};_this.onOpenChange=function(e){_this.props.onOpenChange(e)};_this.onDestroy=function(key){_this.props.onDestroy(key)};_this.getFlatInstanceArray=function(){return _this.instanceArray};_this.step=function(direction){var children=_this.getFlatInstanceArray(),activeKey=_this.props.store.getState().activeKey[getEventKey(_this.props)],
len=children.length;if(!len)return null;0>direction&&(children=children.concat().reverse());var activeIndex=-1;children.every(function(c,ci){return c&&c.props.eventKey===activeKey?(activeIndex=ci,!1):!0});if(_this.props.defaultActiveFirst||-1===activeIndex||!allDisabled(children.slice(activeIndex,len-1))){var i=direction=(activeIndex+1)%len;do{var child=children[i];if(!child||child.props.disabled)i=(i+1)%len;else return child}while(i!==direction);return null}};_this.renderCommonMenuItem=function(child,
i,extraProps){var state=_this.props.store.getState(),props=(0,_assertThisInitialized2.default)(_this).props,key=(0,_util.getKeyFromChildrenIndex)(child,props.eventKey,i),childProps=child.props;if(!childProps||"string"===typeof child.type)return child;state=key===state.activeKey;extraProps=(0,_objectSpread4.default)((0,_objectSpread4.default)({mode:childProps.mode||props.mode,level:props.level,inlineIndent:props.inlineIndent,renderMenuItem:_this.renderMenuItem,rootPrefixCls:props.prefixCls,index:i,
parentMenu:props.parentMenu,manualRef:childProps.disabled?void 0:(0,_createChainedFunction.default)(child.ref,saveRef.bind((0,_assertThisInitialized2.default)(_this))),eventKey:key,active:!childProps.disabled&&state,multiple:props.multiple,onClick:function(e){(childProps.onClick||_util.noop)(e);_this.onClick(e)},onItemHover:_this.onItemHover,motion:props.motion,subMenuOpenDelay:props.subMenuOpenDelay,subMenuCloseDelay:props.subMenuCloseDelay,forceSubMenuRender:props.forceSubMenuRender,onOpenChange:_this.onOpenChange,
onDeselect:_this.onDeselect,onSelect:_this.onSelect,builtinPlacements:props.builtinPlacements,itemIcon:childProps.itemIcon||_this.props.itemIcon,expandIcon:childProps.expandIcon||_this.props.expandIcon},extraProps),{},{direction:props.direction});if("inline"===props.mode||(0,_util.isMobileDevice)())extraProps.triggerSubMenuAction="click";return React.cloneElement(child,(0,_objectSpread4.default)((0,_objectSpread4.default)({},extraProps),{},{key:key||i}))};_this.renderMenuItem=function(c,i,subMenuKey){if(!c)return null;
var state=_this.props.store.getState();return _this.renderCommonMenuItem(c,i,{openKeys:state.openKeys,selectedKeys:state.selectedKeys,triggerSubMenuAction:_this.props.triggerSubMenuAction,subMenuKey:subMenuKey})};props$jscomp$0.store.setState({activeKey:(0,_objectSpread4.default)((0,_objectSpread4.default)({},props$jscomp$0.store.getState().activeKey),{},(0,_defineProperty2.default)({},props$jscomp$0.eventKey,getActiveKey(props$jscomp$0,props$jscomp$0.activeKey)))});_this.instanceArray=[];return _this}
(0,_inherits2.default)(SubPopupMenu,_React$Component);var _super=(0,_createSuper2.default)(SubPopupMenu);(0,_createClass2.default)(SubPopupMenu,[{key:"componentDidMount",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"shouldComponentUpdate",value:function(nextProps){return this.props.visible||nextProps.visible||this.props.className!==nextProps.className||!(0,_shallowequal.default)(this.props.style,nextProps.style)}},{key:"componentDidUpdate",value:function(prevProps){var props=
this.props,originalActiveKey="activeKey"in props?props.activeKey:props.store.getState().activeKey[getEventKey(props)],activeKey=getActiveKey(props,originalActiveKey);activeKey!==originalActiveKey?updateActiveKey(props.store,getEventKey(props),activeKey):"activeKey"in prevProps&&(prevProps=getActiveKey(prevProps,prevProps.activeKey),activeKey!==prevProps&&updateActiveKey(props.store,getEventKey(props),activeKey))}},{key:"render",value:function(){var _this2=this,props=(0,_extends2.default)({},this.props);
this.instanceArray=[];var domProps={className:(0,_classnames.default)(props.prefixCls,props.className,"".concat(props.prefixCls,"-").concat(props.mode)),role:props.role||"menu"};props.id&&(domProps.id=props.id);props.focusable&&(domProps.tabIndex=0,domProps.onKeyDown=this.onKeyDown);var prefixCls=props.prefixCls,eventKey=props.eventKey,visible=props.visible,level=props.level,mode=props.mode,overflowedIndicator=props.overflowedIndicator,theme=props.theme;_util.menuAllProps.forEach(function(key){return delete props[key]});
delete props.onClick;return React.createElement(_DOMWrap.default,(0,_extends2.default)({},props,{prefixCls:prefixCls,mode:mode,tag:"ul",level:level,theme:theme,visible:visible,overflowedIndicator:overflowedIndicator},domProps),(0,_toArray.default)(props.children).map(function(c,i){return _this2.renderMenuItem(c,i,eventKey||"0-menu-")}))}}]);return SubPopupMenu}(React.Component);exports.SubPopupMenu=require;require.defaultProps={prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,
visible:!0,focusable:!0,style:{},manualRef:_util.noop};require=(0,module.connect)()(require);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_menu$lib$SubPopupMenu.js.map
