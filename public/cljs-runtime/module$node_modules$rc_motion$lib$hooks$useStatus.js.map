{
"version":3,
"file":"module$node_modules$rc_motion$lib$hooks$useStatus.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/rc-motion/lib/hooks/useStatus.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_motion$lib$hooks$useStatus\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useStatus;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _interface = require(\"../interface\");\n\nvar _useState7 = _interopRequireDefault(require(\"./useState\"));\n\nvar _useIsomorphicLayoutEffect = _interopRequireDefault(require(\"./useIsomorphicLayoutEffect\"));\n\nvar _useStepQueue3 = _interopRequireWildcard(require(\"./useStepQueue\"));\n\nvar _useDomMotionEvents3 = _interopRequireDefault(require(\"./useDomMotionEvents\"));\n\nfunction useStatus(supportMotion, visible, getElement, _ref) {\n  var _ref$motionEnter = _ref.motionEnter,\n      motionEnter = _ref$motionEnter === void 0 ? true : _ref$motionEnter,\n      _ref$motionAppear = _ref.motionAppear,\n      motionAppear = _ref$motionAppear === void 0 ? true : _ref$motionAppear,\n      _ref$motionLeave = _ref.motionLeave,\n      motionLeave = _ref$motionLeave === void 0 ? true : _ref$motionLeave,\n      motionDeadline = _ref.motionDeadline,\n      motionLeaveImmediately = _ref.motionLeaveImmediately,\n      onAppearPrepare = _ref.onAppearPrepare,\n      onEnterPrepare = _ref.onEnterPrepare,\n      onLeavePrepare = _ref.onLeavePrepare,\n      onAppearStart = _ref.onAppearStart,\n      onEnterStart = _ref.onEnterStart,\n      onLeaveStart = _ref.onLeaveStart,\n      onAppearActive = _ref.onAppearActive,\n      onEnterActive = _ref.onEnterActive,\n      onLeaveActive = _ref.onLeaveActive,\n      onAppearEnd = _ref.onAppearEnd,\n      onEnterEnd = _ref.onEnterEnd,\n      onLeaveEnd = _ref.onLeaveEnd,\n      onVisibleChanged = _ref.onVisibleChanged;\n\n  // Used for outer render usage to avoid `visible: false & status: none` to render nothing\n  var _useState = (0, _useState7.default)(),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      asyncVisible = _useState2[0],\n      setAsyncVisible = _useState2[1];\n\n  var _useState3 = (0, _useState7.default)(_interface.STATUS_NONE),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = (0, _useState7.default)(null),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      style = _useState6[0],\n      setStyle = _useState6[1];\n\n  var mountedRef = (0, React.useRef)(false);\n  var deadlineRef = (0, React.useRef)(null);\n  var destroyedRef = (0, React.useRef)(false); // =========================== Dom Node ===========================\n\n  var cacheElementRef = (0, React.useRef)(null);\n\n  function getDomElement() {\n    var element = getElement();\n    return element || cacheElementRef.current;\n  } // ========================== Motion End ==========================\n\n\n  var activeRef = (0, React.useRef)(false);\n\n  function onInternalMotionEnd(event) {\n    var element = getDomElement();\n\n    if (event && !event.deadline && event.target !== element) {\n      // event exists\n      // not initiated by deadline\n      // transitionEnd not fired by inner elements\n      return;\n    }\n\n    var canEnd;\n\n    if (status === _interface.STATUS_APPEAR && activeRef.current) {\n      canEnd = onAppearEnd === null || onAppearEnd === void 0 ? void 0 : onAppearEnd(element, event);\n    } else if (status === _interface.STATUS_ENTER && activeRef.current) {\n      canEnd = onEnterEnd === null || onEnterEnd === void 0 ? void 0 : onEnterEnd(element, event);\n    } else if (status === _interface.STATUS_LEAVE && activeRef.current) {\n      canEnd = onLeaveEnd === null || onLeaveEnd === void 0 ? void 0 : onLeaveEnd(element, event);\n    } // Only update status when `canEnd` and not destroyed\n\n\n    if (canEnd !== false && !destroyedRef.current) {\n      setStatus(_interface.STATUS_NONE);\n      setStyle(null);\n    }\n  }\n\n  var _useDomMotionEvents = (0, _useDomMotionEvents3.default)(onInternalMotionEnd),\n      _useDomMotionEvents2 = (0, _slicedToArray2.default)(_useDomMotionEvents, 1),\n      patchMotionEvents = _useDomMotionEvents2[0]; // ============================= Step =============================\n\n\n  var eventHandlers = React.useMemo(function () {\n    var _ref2, _ref3, _ref4;\n\n    switch (status) {\n      case 'appear':\n        return _ref2 = {}, (0, _defineProperty2.default)(_ref2, _interface.STEP_PREPARE, onAppearPrepare), (0, _defineProperty2.default)(_ref2, _interface.STEP_START, onAppearStart), (0, _defineProperty2.default)(_ref2, _interface.STEP_ACTIVE, onAppearActive), _ref2;\n\n      case 'enter':\n        return _ref3 = {}, (0, _defineProperty2.default)(_ref3, _interface.STEP_PREPARE, onEnterPrepare), (0, _defineProperty2.default)(_ref3, _interface.STEP_START, onEnterStart), (0, _defineProperty2.default)(_ref3, _interface.STEP_ACTIVE, onEnterActive), _ref3;\n\n      case 'leave':\n        return _ref4 = {}, (0, _defineProperty2.default)(_ref4, _interface.STEP_PREPARE, onLeavePrepare), (0, _defineProperty2.default)(_ref4, _interface.STEP_START, onLeaveStart), (0, _defineProperty2.default)(_ref4, _interface.STEP_ACTIVE, onLeaveActive), _ref4;\n\n      default:\n        return {};\n    }\n  }, [status]);\n\n  var _useStepQueue = (0, _useStepQueue3.default)(status, function (newStep) {\n    // Only prepare step can be skip\n    if (newStep === _interface.STEP_PREPARE) {\n      var onPrepare = eventHandlers[_interface.STEP_PREPARE];\n\n      if (!onPrepare) {\n        return _useStepQueue3.SkipStep;\n      }\n\n      return onPrepare(getDomElement());\n    } // Rest step is sync update\n\n\n    if (step in eventHandlers) {\n      var _eventHandlers$step;\n\n      setStyle(((_eventHandlers$step = eventHandlers[step]) === null || _eventHandlers$step === void 0 ? void 0 : _eventHandlers$step.call(eventHandlers, getDomElement(), null)) || null);\n    }\n\n    if (step === _interface.STEP_ACTIVE) {\n      // Patch events when motion needed\n      patchMotionEvents(getDomElement());\n\n      if (motionDeadline > 0) {\n        clearTimeout(deadlineRef.current);\n        deadlineRef.current = setTimeout(function () {\n          onInternalMotionEnd({\n            deadline: true\n          });\n        }, motionDeadline);\n      }\n    }\n\n    return _useStepQueue3.DoStep;\n  }),\n      _useStepQueue2 = (0, _slicedToArray2.default)(_useStepQueue, 2),\n      startStep = _useStepQueue2[0],\n      step = _useStepQueue2[1];\n\n  var active = (0, _useStepQueue3.isActive)(step);\n  activeRef.current = active; // ============================ Status ============================\n  // Update with new status\n\n  (0, _useIsomorphicLayoutEffect.default)(function () {\n    setAsyncVisible(visible);\n\n    if (!supportMotion) {\n      return;\n    }\n\n    var isMounted = mountedRef.current;\n    mountedRef.current = true;\n    var nextStatus; // Appear\n\n    if (!isMounted && visible && motionAppear) {\n      nextStatus = _interface.STATUS_APPEAR;\n    } // Enter\n\n\n    if (isMounted && visible && motionEnter) {\n      nextStatus = _interface.STATUS_ENTER;\n    } // Leave\n\n\n    if (isMounted && !visible && motionLeave || !isMounted && motionLeaveImmediately && !visible && motionLeave) {\n      nextStatus = _interface.STATUS_LEAVE;\n    } // Update to next status\n\n\n    if (nextStatus) {\n      setStatus(nextStatus);\n      startStep();\n    }\n  }, [visible]); // ============================ Effect ============================\n  // Reset when motion changed\n\n  (0, React.useEffect)(function () {\n    if ( // Cancel appear\n    status === _interface.STATUS_APPEAR && !motionAppear || // Cancel enter\n    status === _interface.STATUS_ENTER && !motionEnter || // Cancel leave\n    status === _interface.STATUS_LEAVE && !motionLeave) {\n      setStatus(_interface.STATUS_NONE);\n    }\n  }, [motionAppear, motionEnter, motionLeave]);\n  (0, React.useEffect)(function () {\n    return function () {\n      clearTimeout(deadlineRef.current);\n      destroyedRef.current = true;\n    };\n  }, []); // Trigger `onVisibleChanged`\n\n  (0, React.useEffect)(function () {\n    if (asyncVisible !== undefined && status === _interface.STATUS_NONE) {\n      onVisibleChanged === null || onVisibleChanged === void 0 ? void 0 : onVisibleChanged(asyncVisible);\n    }\n  }, [asyncVisible, status]); // ============================ Styles ============================\n\n  var mergedStyle = style;\n\n  if (eventHandlers[_interface.STEP_PREPARE] && step === _interface.STEP_START) {\n    mergedStyle = (0, _objectSpread2.default)({\n      transition: 'none'\n    }, mergedStyle);\n  }\n\n  return [status, step, mergedStyle, asyncVisible !== null && asyncVisible !== void 0 ? asyncVisible : visible];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","value","default","useStatus","supportMotion","visible","getElement","_ref","onInternalMotionEnd","event","element","cacheElementRef","current","deadline","target","canEnd","status","_interface","STATUS_APPEAR","activeRef","onAppearEnd","STATUS_ENTER","onEnterEnd","STATUS_LEAVE","onLeaveEnd","destroyedRef","setStatus","STATUS_NONE","setStyle","_ref$motionEnter","motionEnter","_ref$motionAppear","motionAppear","_ref$motionLeave","motionLeave","motionDeadline","motionLeaveImmediately","onAppearPrepare","onEnterPrepare","onLeavePrepare","onAppearStart","onEnterStart","onLeaveStart","onAppearActive","onEnterActive","onLeaveActive","onVisibleChanged","_useState","_useState7","_useState2","_slicedToArray2","asyncVisible","setAsyncVisible","_useState3","_useState4","_useState5","_useState6","style","mountedRef","React","useRef","deadlineRef","_useDomMotionEvents","_useDomMotionEvents3","patchMotionEvents","_useDomMotionEvents2","eventHandlers","useMemo","_ref2","_ref3","_ref4","_defineProperty2","STEP_PREPARE","STEP_START","STEP_ACTIVE","_useStepQueue","_useStepQueue3","newStep","onPrepare","SkipStep","step","_eventHandlers$step","call","clearTimeout","setTimeout","DoStep","_useStepQueue2","startStep","active","isActive","_useIsomorphicLayoutEffect","isMounted","nextStatus","useEffect","undefined","mergedStyle","_objectSpread2","transition"]
}
