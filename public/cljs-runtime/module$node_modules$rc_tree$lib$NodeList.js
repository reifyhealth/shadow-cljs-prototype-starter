shadow$provide.module$node_modules$rc_tree$lib$NodeList=function(global,require,module,exports){function getMinimumRangeTransitionRange(list,virtual,height,itemHeight){return!1!==virtual&&height?list.slice(0,Math.ceil(height/itemHeight)+1):list}function itemKey(item){var key=item.data.key;item=item.pos;return(0,_treeUtil.getKey)(key,item)}function getAccessibilityPath(item){for(var path=String(item.data.key);item.parent;)item=item.parent,path="".concat(item.data.key," \x3e ").concat(path);return path}
global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getMinimumRangeTransitionRange=getMinimumRangeTransitionRange;exports.default=exports.MotionEntity=exports.MOTION_KEY=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_objectWithoutProperties2=module(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=global(require("module$node_modules$react$index")),_rcVirtualList=module(require("module$node_modules$rc_virtual_list$lib$index")),_MotionTreeNode=module(require("module$node_modules$rc_tree$lib$MotionTreeNode")),_diffUtil=require("module$node_modules$rc_tree$lib$utils$diffUtil"),_treeUtil=require("module$node_modules$rc_tree$lib$utils$treeUtil"),HIDDEN_STYLE={width:0,height:0,display:"flex",
overflow:"hidden",opacity:0,border:0,padding:0,margin:0},noop=function(){},MOTION_KEY="RC_TREE_MOTION_".concat(Math.random());exports.MOTION_KEY=MOTION_KEY;require={key:MOTION_KEY};global={key:MOTION_KEY,level:0,index:0,pos:"0",node:require};exports.MotionEntity=global;var MotionFlattenData={parent:null,children:[],pos:global.pos,data:require,isStart:[],isEnd:[]};require=React.forwardRef(function(props,ref){function onMotionEnd(){setPrevData(data);setTransitionData(data);setTransitionRange([]);setMotionType(null);
onListChangeEnd()}var prefixCls=props.prefixCls,data=props.data,expandedKeys=props.expandedKeys,selectedKeys=props.selectedKeys,checkedKeys=props.checkedKeys,loadedKeys=props.loadedKeys,loadingKeys=props.loadingKeys,halfCheckedKeys=props.halfCheckedKeys,keyEntities=props.keyEntities,disabled=props.disabled,dragging=props.dragging,dragOverNodeKey=props.dragOverNodeKey,dropPosition=props.dropPosition,motion=props.motion,height=props.height,itemHeight=props.itemHeight,virtual=props.virtual,focusable=
props.focusable,activeItem=props.activeItem,focused=props.focused,tabIndex=props.tabIndex,onKeyDown=props.onKeyDown,onFocus=props.onFocus,onBlur=props.onBlur,onActiveChange=props.onActiveChange,onListChangeStart=props.onListChangeStart,onListChangeEnd=props.onListChangeEnd;props=(0,_objectWithoutProperties2.default)(props,"prefixCls data selectable checkable expandedKeys selectedKeys checkedKeys loadedKeys loadingKeys halfCheckedKeys keyEntities disabled dragging dragOverNodeKey dropPosition motion height itemHeight virtual focusable activeItem focused tabIndex onKeyDown onFocus onBlur onActiveChange onListChangeStart onListChangeEnd".split(" "));
var listRef=React.useRef(null),indentMeasurerRef=React.useRef(null);React.useImperativeHandle(ref,function(){return{scrollTo:function(scroll){listRef.current.scrollTo(scroll)},getIndentWidth:function(){return indentMeasurerRef.current.offsetWidth}}});ref=React.useState(expandedKeys);ref=(0,_slicedToArray2.default)(ref,2);var prevExpandedKeys=ref[0],setPrevExpandedKeys=ref[1];ref=React.useState(data);ref=(0,_slicedToArray2.default)(ref,2);var prevData=ref[0],setPrevData=ref[1];ref=React.useState(data);
var _React$useState6=(0,_slicedToArray2.default)(ref,2);ref=_React$useState6[0];var setTransitionData=_React$useState6[1];_React$useState6=React.useState([]);_React$useState6=(0,_slicedToArray2.default)(_React$useState6,2);var transitionRange=_React$useState6[0],setTransitionRange=_React$useState6[1];_React$useState6=React.useState(null);_React$useState6=(0,_slicedToArray2.default)(_React$useState6,2);var motionType=_React$useState6[0],setMotionType=_React$useState6[1];React.useEffect(function(){setPrevExpandedKeys(expandedKeys);
var diffExpanded=(0,_diffUtil.findExpandedKeys)(prevExpandedKeys,expandedKeys);if(null!==diffExpanded.key)if(diffExpanded.add){var keyIndex=prevData.findIndex(function(_ref){return _ref.data.key===diffExpanded.key}),rangeNodes=getMinimumRangeTransitionRange((0,_diffUtil.getExpandRange)(prevData,data,diffExpanded.key),virtual,height,itemHeight),newTransitionData=prevData.slice();newTransitionData.splice(keyIndex+1,0,MotionFlattenData);setTransitionData(newTransitionData);setTransitionRange(rangeNodes);
setMotionType("show")}else keyIndex=data.findIndex(function(_ref2){return _ref2.data.key===diffExpanded.key}),rangeNodes=getMinimumRangeTransitionRange((0,_diffUtil.getExpandRange)(data,prevData,diffExpanded.key),virtual,height,itemHeight),newTransitionData=data.slice(),newTransitionData.splice(keyIndex+1,0,MotionFlattenData),setTransitionData(newTransitionData),setTransitionRange(rangeNodes),setMotionType("hide");else prevData!==data&&(setPrevData(data),setTransitionData(data))},[expandedKeys,data]);
React.useEffect(function(){dragging||onMotionEnd()},[dragging]);ref=motion?ref:data;var treeNodeRequiredProps={expandedKeys:expandedKeys,selectedKeys:selectedKeys,loadedKeys:loadedKeys,loadingKeys:loadingKeys,checkedKeys:checkedKeys,halfCheckedKeys:halfCheckedKeys,dragOverNodeKey:dragOverNodeKey,dropPosition:dropPosition,keyEntities:keyEntities};return React.createElement(React.Fragment,null,focused&&activeItem&&React.createElement("span",{style:HIDDEN_STYLE,"aria-live":"assertive"},getAccessibilityPath(activeItem)),
React.createElement("div",{role:"tree"},React.createElement("input",{style:HIDDEN_STYLE,disabled:!1===focusable||disabled,tabIndex:!1!==focusable?tabIndex:null,onKeyDown:onKeyDown,onFocus:onFocus,onBlur:onBlur,value:"",onChange:noop})),React.createElement("div",{className:"".concat(prefixCls,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},React.createElement("div",{className:"".concat(prefixCls,"-indent")},React.createElement("div",
{ref:indentMeasurerRef,className:"".concat(prefixCls,"-indent-unit")}))),React.createElement(_rcVirtualList.default,(0,_extends2.default)({},props,{data:ref,itemKey:itemKey,height:height,fullHeight:!1,virtual:virtual,itemHeight:itemHeight,prefixCls:"".concat(prefixCls,"-list"),ref:listRef}),function(treeNode){var pos=treeNode.pos,_treeNode$data=treeNode.data,key=_treeNode$data.key;_treeNode$data=(0,_objectWithoutProperties2.default)(_treeNode$data,["key"]);var isStart=treeNode.isStart,isEnd=treeNode.isEnd,
mergedKey=(0,_treeUtil.getKey)(key,pos);delete _treeNode$data.children;mergedKey=(0,_treeUtil.getTreeNodeProps)(mergedKey,treeNodeRequiredProps);return React.createElement(_MotionTreeNode.default,(0,_extends2.default)({},_treeNode$data,mergedKey,{active:!!activeItem&&key===activeItem.data.key,pos:pos,data:treeNode.data,isStart:isStart,isEnd:isEnd,motion:motion,motionNodes:key===MOTION_KEY?transitionRange:null,motionType:motionType,onMotionStart:onListChangeStart,onMotionEnd:onMotionEnd,treeNodeRequiredProps:treeNodeRequiredProps,
onMouseMove:function(){onActiveChange(null)}}))}))});require.displayName="NodeList";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_tree$lib$NodeList.js.map
