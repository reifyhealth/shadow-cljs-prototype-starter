shadow$provide.module$node_modules$rc_util$lib$PortalWrapper=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2.default)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,Super)}}function _isNativeReflectConstruct(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getOpenCount=function(){return 0};exports.default=void 0;var _classCallCheck2=
global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),
React=module(require("module$node_modules$react$index")),_raf=global(require("module$node_modules$rc_util$lib$raf")),_Portal=global(require("module$node_modules$rc_util$lib$Portal"));module=global(require("module$node_modules$rc_util$lib$Dom$canUseDom"));var _switchScrollingEffect=global(require("module$node_modules$rc_util$lib$switchScrollingEffect")),_setStyle=global(require("module$node_modules$rc_util$lib$setStyle")),_scrollLocker=global(require("module$node_modules$rc_util$lib$Dom$scrollLocker")),
openCount=0,supportDom=(0,module.default)(),cacheOverflow={},getParent=function(getContainer){if(!supportDom)return null;if(getContainer){if("string"===typeof getContainer)return document.querySelectorAll(getContainer)[0];if("function"===typeof getContainer)return getContainer();if("object"===(0,_typeof2.default)(getContainer)&&getContainer instanceof window.HTMLElement)return getContainer}return document.body};require=function(_React$Component){function PortalWrapper(props){(0,_classCallCheck2.default)(this,
PortalWrapper);var _this=_super.call(this,props);_this.componentRef=React.createRef();_this.updateScrollLocker=function(prevProps){prevProps=(prevProps||{}).visible;var _this$props=_this.props,getContainer=_this$props.getContainer;(_this$props=_this$props.visible)&&_this$props!==prevProps&&supportDom&&getParent(getContainer)!==_this.scrollLocker.getContainer()&&_this.scrollLocker.reLock({container:getParent(getContainer)})};_this.updateOpenCount=function(prevProps){var _ref2=prevProps||{},prevVisible=
_ref2.visible;_ref2=_ref2.getContainer;var _this$props2=_this.props,visible=_this$props2.visible;_this$props2=_this$props2.getContainer;visible!==prevVisible&&supportDom&&getParent(_this$props2)===document.body&&(visible&&!prevVisible?openCount+=1:prevProps&&--openCount);("function"===typeof _this$props2&&"function"===typeof _ref2?_this$props2.toString()!==_ref2.toString():_this$props2!==_ref2)&&_this.removeCurrentContainer()};_this.attachToParent=function(){if(0<arguments.length&&void 0!==arguments[0]&&
arguments[0]||_this.container&&!_this.container.parentNode){var parent=getParent(_this.props.getContainer);return parent?(parent.appendChild(_this.container),!0):!1}return!0};_this.getContainer=function(){if(!supportDom)return null;_this.container||(_this.container=document.createElement("div"),_this.attachToParent(!0));_this.setWrapperClassName();return _this.container};_this.setWrapperClassName=function(){var wrapperClassName=_this.props.wrapperClassName;_this.container&&wrapperClassName&&wrapperClassName!==
_this.container.className&&(_this.container.className=wrapperClassName)};_this.removeCurrentContainer=function(){var _this$container,_this$container$paren;null===(_this$container=_this.container)||void 0===_this$container?void 0:null===(_this$container$paren=_this$container.parentNode)||void 0===_this$container$paren?void 0:_this$container$paren.removeChild(_this.container)};_this.switchScrollingEffect=function(){1!==openCount||Object.keys(cacheOverflow).length?openCount||((0,_setStyle.default)(cacheOverflow),
cacheOverflow={},(0,_switchScrollingEffect.default)(!0)):((0,_switchScrollingEffect.default)(),cacheOverflow=(0,_setStyle.default)({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))};_this.scrollLocker=new _scrollLocker.default({container:getParent(props.getContainer)});return _this}(0,_inherits2.default)(PortalWrapper,_React$Component);var _super=_createSuper(PortalWrapper);(0,_createClass2.default)(PortalWrapper,[{key:"componentDidMount",value:function(){var _this2=this;this.updateOpenCount();
this.attachToParent()||(this.rafId=(0,_raf.default)(function(){_this2.forceUpdate()}))}},{key:"componentDidUpdate",value:function(prevProps){this.updateOpenCount(prevProps);this.updateScrollLocker(prevProps);this.setWrapperClassName();this.attachToParent()}},{key:"componentWillUnmount",value:function(){var _this$props3=this.props,visible=_this$props3.visible;_this$props3=_this$props3.getContainer;supportDom&&getParent(_this$props3)===document.body&&(openCount=visible&&openCount?openCount-1:openCount);
this.removeCurrentContainer();_raf.default.cancel(this.rafId)}},{key:"render",value:function(){var _this$props4=this.props,children=_this$props4.children,visible=_this$props4.visible,portal=null,childProps={getOpenCount:function(){return openCount},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};if(_this$props4.forceRender||visible||this.componentRef.current)portal=React.createElement(_Portal.default,{getContainer:this.getContainer,ref:this.componentRef},
children(childProps));return portal}}]);return PortalWrapper}(React.Component);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_util$lib$PortalWrapper.js.map
