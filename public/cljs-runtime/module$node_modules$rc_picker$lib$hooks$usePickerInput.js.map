{
"version":3,
"file":"module$node_modules$rc_picker$lib$hooks$usePickerInput.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/rc-picker/lib/hooks/usePickerInput.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_picker$lib$hooks$usePickerInput\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = usePickerInput;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _KeyCode = _interopRequireDefault(require(\"rc-util/lib/KeyCode\"));\n\nvar _uiUtil = require(\"../utils/uiUtil\");\n\nfunction usePickerInput(_ref) {\n  var open = _ref.open,\n      value = _ref.value,\n      isClickOutside = _ref.isClickOutside,\n      triggerOpen = _ref.triggerOpen,\n      forwardKeyDown = _ref.forwardKeyDown,\n      _onKeyDown = _ref.onKeyDown,\n      blurToCancel = _ref.blurToCancel,\n      onSubmit = _ref.onSubmit,\n      onCancel = _ref.onCancel,\n      _onFocus = _ref.onFocus,\n      _onBlur = _ref.onBlur;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      typing = _useState2[0],\n      setTyping = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      focused = _useState4[0],\n      setFocused = _useState4[1];\n  /**\n   * We will prevent blur to handle open event when user click outside,\n   * since this will repeat trigger `onOpenChange` event.\n   */\n\n\n  var preventBlurRef = (0, _react.useRef)(false);\n  var valueChangedRef = (0, _react.useRef)(false);\n  var preventDefaultRef = (0, _react.useRef)(false);\n  var inputProps = {\n    onMouseDown: function onMouseDown() {\n      setTyping(true);\n      triggerOpen(true);\n    },\n    onKeyDown: function onKeyDown(e) {\n      var preventDefault = function preventDefault() {\n        preventDefaultRef.current = true;\n      };\n\n      _onKeyDown(e, preventDefault);\n\n      if (preventDefaultRef.current) return;\n\n      switch (e.which) {\n        case _KeyCode.default.ENTER:\n          {\n            if (!open) {\n              triggerOpen(true);\n            } else if (onSubmit() !== false) {\n              setTyping(true);\n            }\n\n            e.preventDefault();\n            return;\n          }\n\n        case _KeyCode.default.TAB:\n          {\n            if (typing && open && !e.shiftKey) {\n              setTyping(false);\n              e.preventDefault();\n            } else if (!typing && open) {\n              if (!forwardKeyDown(e) && e.shiftKey) {\n                setTyping(true);\n                e.preventDefault();\n              }\n            }\n\n            return;\n          }\n\n        case _KeyCode.default.ESC:\n          {\n            setTyping(true);\n            onCancel();\n            return;\n          }\n      }\n\n      if (!open && ![_KeyCode.default.SHIFT].includes(e.which)) {\n        triggerOpen(true);\n      } else if (!typing) {\n        // Let popup panel handle keyboard\n        forwardKeyDown(e);\n      }\n    },\n    onFocus: function onFocus(e) {\n      setTyping(true);\n      setFocused(true);\n\n      if (_onFocus) {\n        _onFocus(e);\n      }\n    },\n    onBlur: function onBlur(e) {\n      if (preventBlurRef.current || !isClickOutside(document.activeElement)) {\n        preventBlurRef.current = false;\n        return;\n      }\n\n      if (blurToCancel) {\n        setTimeout(function () {\n          var _document = document,\n              activeElement = _document.activeElement;\n\n          while (activeElement && activeElement.shadowRoot) {\n            activeElement = activeElement.shadowRoot.activeElement;\n          }\n\n          if (isClickOutside(activeElement)) {\n            onCancel();\n          }\n        }, 0);\n      } else if (open) {\n        triggerOpen(false);\n\n        if (valueChangedRef.current) {\n          onSubmit();\n        }\n      }\n\n      setFocused(false);\n\n      if (_onBlur) {\n        _onBlur(e);\n      }\n    }\n  }; // check if value changed\n\n  (0, _react.useEffect)(function () {\n    valueChangedRef.current = false;\n  }, [open]);\n  (0, _react.useEffect)(function () {\n    valueChangedRef.current = true;\n  }, [value]); // Global click handler\n\n  (0, _react.useEffect)(function () {\n    return (0, _uiUtil.addGlobalMouseDownEvent)(function (e) {\n      var target = (0, _uiUtil.getTargetFromEvent)(e);\n\n      if (open) {\n        var clickedOutside = isClickOutside(target);\n\n        if (!clickedOutside) {\n          preventBlurRef.current = true; // Always set back in case `onBlur` prevented by user\n\n          requestAnimationFrame(function () {\n            preventBlurRef.current = false;\n          });\n        } else if (!focused || clickedOutside) {\n          triggerOpen(false);\n        }\n      }\n    });\n  });\n  return [inputProps, {\n    focused: focused,\n    typing: typing\n  }];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","default","usePickerInput","_ref","open","isClickOutside","triggerOpen","forwardKeyDown","_onKeyDown","onKeyDown","blurToCancel","onSubmit","onCancel","_onFocus","onFocus","_onBlur","onBlur","_useState","_react","useState","_useState2","_slicedToArray2","typing","setTyping","_useState3","_useState4","focused","setFocused","preventBlurRef","useRef","valueChangedRef","preventDefaultRef","useEffect","current","_uiUtil","addGlobalMouseDownEvent","e","target","getTargetFromEvent","clickedOutside","requestAnimationFrame","inputProps","onMouseDown","preventDefault","which","_KeyCode","ENTER","TAB","shiftKey","ESC","SHIFT","includes","document","activeElement","setTimeout","shadowRoot"]
}
