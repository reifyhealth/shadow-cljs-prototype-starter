shadow$provide.module$node_modules$rc_menu$lib$SubMenu=function(global,require,module,exports){module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.SubMenu=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=global(require("module$node_modules$$babel$runtime$helpers$createSuper")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectSpread3=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
React=module(require("module$node_modules$react$index")),ReactDOM=module(require("module$node_modules$react_dom$index")),_rcTrigger=global(require("module$node_modules$rc_trigger$lib$index")),_raf=global(require("module$node_modules$rc_util$lib$raf")),_KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),_rcMotion=global(require("module$node_modules$rc_motion$lib$index")),_classnames=global(require("module$node_modules$classnames$index"));module=require("module$node_modules$mini_store$cjs$index");
var _SubPopupMenu=global(require("module$node_modules$rc_menu$lib$SubPopupMenu")),_placements=require("module$node_modules$rc_menu$lib$placements"),_util=require("module$node_modules$rc_menu$lib$util"),guid=0,popupPlacementMap={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},updateDefaultActiveFirst=function(store,eventKey,defaultActiveFirst){eventKey=(0,_util.getMenuIdFromSubMenuEventKey)(eventKey);var state=store.getState();store.setState({defaultActiveFirst:(0,
_objectSpread3.default)((0,_objectSpread3.default)({},state.defaultActiveFirst),{},(0,_defineProperty2.default)({},eventKey,defaultActiveFirst))})};require=function(_React$Component){function SubMenu(props$jscomp$0){(0,_classCallCheck2.default)(this,SubMenu);var _this=_super.call(this,props$jscomp$0);_this.onDestroy=function(key){_this.props.onDestroy(key)};_this.onKeyDown=function(e){var keyCode=e.keyCode,menu=_this.menuInstance,store=_this.props.store,visible=_this.getVisible();if(keyCode===_KeyCode.default.ENTER)return _this.onTitleClick(e),
updateDefaultActiveFirst(store,_this.props.eventKey,!0),!0;if(keyCode===_KeyCode.default.RIGHT){if(visible)menu.onKeyDown(e);else _this.triggerOpenChange(!0),updateDefaultActiveFirst(store,_this.props.eventKey,!0);return!0}if(keyCode===_KeyCode.default.LEFT){if(visible)e=menu.onKeyDown(e);else return;e||(_this.triggerOpenChange(!1),e=!0);return e}if(visible&&(keyCode===_KeyCode.default.UP||keyCode===_KeyCode.default.DOWN))return menu.onKeyDown(e)};_this.onOpenChange=function(e){_this.props.onOpenChange(e)};
_this.onPopupVisibleChange=function(visible){_this.triggerOpenChange(visible,visible?"mouseenter":"mouseleave")};_this.onMouseEnter=function(e){var _this$props=_this.props,key=_this$props.eventKey,onMouseEnter=_this$props.onMouseEnter;updateDefaultActiveFirst(_this$props.store,_this.props.eventKey,!1);onMouseEnter({key:key,domEvent:e})};_this.onMouseLeave=function(e){var _this$props2=_this.props,eventKey=_this$props2.eventKey,onMouseLeave=_this$props2.onMouseLeave;_this$props2.parentMenu.subMenuInstance=
(0,_assertThisInitialized2.default)(_this);onMouseLeave({key:eventKey,domEvent:e})};_this.onTitleMouseEnter=function(domEvent){var _this$props3=_this.props,key=_this$props3.eventKey,onItemHover=_this$props3.onItemHover;_this$props3=_this$props3.onTitleMouseEnter;onItemHover({key:key,hover:!0});_this$props3({key:key,domEvent:domEvent})};_this.onTitleMouseLeave=function(e){var _this$props4=_this.props,eventKey=_this$props4.eventKey,onItemHover=_this$props4.onItemHover,onTitleMouseLeave=_this$props4.onTitleMouseLeave;
_this$props4.parentMenu.subMenuInstance=(0,_assertThisInitialized2.default)(_this);onItemHover({key:eventKey,hover:!1});onTitleMouseLeave({key:eventKey,domEvent:e})};_this.onTitleClick=function(e){var props=(0,_assertThisInitialized2.default)(_this).props;props.onTitleClick({key:props.eventKey,domEvent:e});"hover"!==props.triggerSubMenuAction&&(_this.triggerOpenChange(!_this.getVisible(),"click"),updateDefaultActiveFirst(props.store,_this.props.eventKey,!1))};_this.onSubMenuClick=function(info){if("function"===
typeof _this.props.onClick)_this.props.onClick(_this.addKeyPath(info))};_this.onSelect=function(info){_this.props.onSelect(info)};_this.onDeselect=function(info){_this.props.onDeselect(info)};_this.getPrefixCls=function(){return"".concat(_this.props.rootPrefixCls,"-submenu")};_this.getActiveClassName=function(){return"".concat(_this.getPrefixCls(),"-active")};_this.getDisabledClassName=function(){return"".concat(_this.getPrefixCls(),"-disabled")};_this.getSelectedClassName=function(){return"".concat(_this.getPrefixCls(),
"-selected")};_this.getOpenClassName=function(){return"".concat(_this.props.rootPrefixCls,"-submenu-open")};_this.getVisible=function(){return _this.state.isOpen};_this.getMode=function(){return _this.state.mode};_this.saveMenuInstance=function(c){_this.menuInstance=c};_this.addKeyPath=function(info){return(0,_objectSpread3.default)((0,_objectSpread3.default)({},info),{},{keyPath:(info.keyPath||[]).concat(_this.props.eventKey)})};_this.triggerOpenChange=function(open,type){var key=_this.props.eventKey,
openChange=function(){_this.onOpenChange({key:key,item:(0,_assertThisInitialized2.default)(_this),trigger:type,open:open})};"mouseenter"===type?_this.mouseenterTimeout=setTimeout(function(){openChange()},0):openChange()};_this.isChildrenSelected=function(){var ret={find:!1};(0,_util.loopMenuItemRecursively)(_this.props.children,_this.props.selectedKeys,ret);return ret.find};_this.isInlineMode=function(){return"inline"===_this.getMode()};_this.adjustWidth=function(){if(_this.subMenuTitle&&_this.menuInstance){var popupMenu=
ReactDOM.findDOMNode(_this.menuInstance);popupMenu.offsetWidth>=_this.subMenuTitle.offsetWidth||(popupMenu.style.minWidth="".concat(_this.subMenuTitle.offsetWidth,"px"))}};_this.saveSubMenuTitle=function(subMenuTitle){_this.subMenuTitle=subMenuTitle};_this.getBaseProps=function(){var props=(0,_assertThisInitialized2.default)(_this).props,mergedMode=_this.getMode();return{mode:"horizontal"===mergedMode?"vertical":mergedMode,visible:_this.getVisible(),level:props.level+1,inlineIndent:props.inlineIndent,
focusable:!1,onClick:_this.onSubMenuClick,onSelect:_this.onSelect,onDeselect:_this.onDeselect,onDestroy:_this.onDestroy,selectedKeys:props.selectedKeys,eventKey:"".concat(props.eventKey,"-menu-"),openKeys:props.openKeys,motion:props.motion,onOpenChange:_this.onOpenChange,subMenuOpenDelay:props.subMenuOpenDelay,parentMenu:(0,_assertThisInitialized2.default)(_this),subMenuCloseDelay:props.subMenuCloseDelay,forceSubMenuRender:props.forceSubMenuRender,triggerSubMenuAction:props.triggerSubMenuAction,builtinPlacements:props.builtinPlacements,
defaultActiveFirst:props.store.getState().defaultActiveFirst[(0,_util.getMenuIdFromSubMenuEventKey)(props.eventKey)],multiple:props.multiple,prefixCls:props.rootPrefixCls,id:_this.internalMenuId,manualRef:_this.saveMenuInstance,itemIcon:props.itemIcon,expandIcon:props.expandIcon,direction:props.direction}};_this.getMotion=function(mode,visible){var haveRendered=(0,_assertThisInitialized2.default)(_this).haveRendered,_this$props5=_this.props,motion=_this$props5.motion;_this$props5=_this$props5.rootPrefixCls;
return(0,_objectSpread3.default)((0,_objectSpread3.default)({},motion),{},{leavedClassName:"".concat(_this$props5,"-hidden"),removeOnLeave:!1,motionAppear:haveRendered||!visible||"inline"!==mode})};var store$jscomp$0=props$jscomp$0.store,eventKey$jscomp$0=props$jscomp$0.eventKey,defaultActiveFirst=store$jscomp$0.getState().defaultActiveFirst,value=_this.isRootMenu=!1;defaultActiveFirst&&(value=defaultActiveFirst[eventKey$jscomp$0]);updateDefaultActiveFirst(store$jscomp$0,eventKey$jscomp$0,value);
_this.state={mode:props$jscomp$0.mode,isOpen:props$jscomp$0.isOpen};return _this}(0,_inherits2.default)(SubMenu,_React$Component);var _super=(0,_createSuper2.default)(SubMenu);(0,_createClass2.default)(SubMenu,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var _this2=this,_this$props6=this.props,mode=_this$props6.mode,parentMenu=_this$props6.parentMenu,manualRef=_this$props6.manualRef,isOpen=_this$props6.isOpen;_this$props6=function(){_this2.setState({mode:mode,
isOpen:isOpen})};var isOpenChanged=isOpen!==this.state.isOpen,isModeChanged=mode!==this.state.mode;if(isModeChanged||isOpenChanged)_raf.default.cancel(this.updateStateRaf),isModeChanged?this.updateStateRaf=(0,_raf.default)(_this$props6):_this$props6();manualRef&&manualRef(this);"horizontal"===mode&&null!==parentMenu&&void 0!==parentMenu&&parentMenu.isRootMenu&&isOpen&&(this.minWidthTimeout=setTimeout(function(){return _this2.adjustWidth()},0))}},{key:"componentWillUnmount",value:function(){var _this$props7=
this.props,onDestroy=_this$props7.onDestroy;_this$props7=_this$props7.eventKey;onDestroy&&onDestroy(_this$props7);this.minWidthTimeout&&clearTimeout(this.minWidthTimeout);this.mouseenterTimeout&&clearTimeout(this.mouseenterTimeout);_raf.default.cancel(this.updateStateRaf)}},{key:"renderPopupMenu",value:function(className,style){var baseProps=this.getBaseProps();return React.createElement(_SubPopupMenu.default,(0,_extends2.default)({},baseProps,{id:this.internalMenuId,className:className,style:style}),
this.props.children)}},{key:"renderChildren",value:function(){var _this3=this,baseProps=this.getBaseProps(),visible=baseProps.visible,forceSubMenuRender=baseProps.forceSubMenuRender,direction=baseProps.direction,mergedMotion=this.getMotion(baseProps.mode,visible);this.haveRendered=!0;this.haveOpened=this.haveOpened||visible||forceSubMenuRender;if(!this.haveOpened)return React.createElement("div",null);var sharedClassName=(0,_classnames.default)("".concat(baseProps.prefixCls,"-sub"),(0,_defineProperty2.default)({},
"".concat(baseProps.prefixCls,"-rtl"),"rtl"===direction));return this.isInlineMode()?React.createElement(_rcMotion.default,(0,_extends2.default)({visible:baseProps.visible},mergedMotion),function(_ref){var className=_ref.className;_ref=_ref.style;className=(0,_classnames.default)(sharedClassName,className);return _this3.renderPopupMenu(className,_ref)}):this.renderPopupMenu(sharedClassName)}},{key:"render",value:function(){var _classNames2,_props$parentMenu,_classNames3,props=(0,_objectSpread3.default)({},
this.props),visible=this.getVisible(),prefixCls=this.getPrefixCls(),inline=this.isInlineMode(),mergedMode=this.getMode(),className=(0,_classnames.default)(prefixCls,"".concat(prefixCls,"-").concat(mergedMode),(_classNames2={},(0,_defineProperty2.default)(_classNames2,props.className,!!props.className),(0,_defineProperty2.default)(_classNames2,this.getOpenClassName(),visible),(0,_defineProperty2.default)(_classNames2,this.getActiveClassName(),props.active||visible&&!inline),(0,_defineProperty2.default)(_classNames2,
this.getDisabledClassName(),props.disabled),(0,_defineProperty2.default)(_classNames2,this.getSelectedClassName(),this.isChildrenSelected()),_classNames2));this.internalMenuId||(props.eventKey?this.internalMenuId="".concat(props.eventKey,"$Menu"):(guid+=1,this.internalMenuId="$__$".concat(guid,"$Menu")));_classNames2={};var titleClickEvents={},titleMouseEvents={};props.disabled||(_classNames2={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},titleClickEvents={onClick:this.onTitleClick},
titleMouseEvents={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var style={},isRTL="rtl"===props.direction;inline&&(isRTL?style.paddingRight=props.inlineIndent*props.level:style.paddingLeft=props.inlineIndent*props.level);var ariaOwns={};this.getVisible()&&(ariaOwns={"aria-owns":this.internalMenuId});var icon=null;"horizontal"!==mergedMode&&(icon=this.props.expandIcon,"function"===typeof this.props.expandIcon&&(icon=React.createElement(this.props.expandIcon,(0,_objectSpread3.default)({},
this.props))));titleClickEvents=React.createElement("div",(0,_extends2.default)({ref:this.saveSubMenuTitle,style:style,className:"".concat(prefixCls,"-title"),role:"button"},titleMouseEvents,titleClickEvents,{"aria-expanded":visible},ariaOwns,{"aria-haspopup":"true",title:"string"===typeof props.title?props.title:void 0}),props.title,icon||React.createElement("i",{className:"".concat(prefixCls,"-arrow")}));titleMouseEvents=this.renderChildren();style=(null===(_props$parentMenu=props.parentMenu)||
void 0===_props$parentMenu?0:_props$parentMenu.isRootMenu)?props.parentMenu.props.getPopupContainer:function(triggerNode){return triggerNode.parentNode};_props$parentMenu=popupPlacementMap[mergedMode];mergedMode=props.popupOffset?{offset:props.popupOffset}:{};ariaOwns=(0,_classnames.default)((_classNames3={},(0,_defineProperty2.default)(_classNames3,props.popupClassName,props.popupClassName&&!inline),(0,_defineProperty2.default)(_classNames3,"".concat(prefixCls,"-rtl"),isRTL),_classNames3));_classNames3=
props.disabled;icon=props.triggerSubMenuAction;var subMenuOpenDelay=props.subMenuOpenDelay,forceSubMenuRender=props.forceSubMenuRender,subMenuCloseDelay=props.subMenuCloseDelay,builtinPlacements=props.builtinPlacements;_util.menuAllProps.forEach(function(key){return delete props[key]});delete props.onClick;isRTL=isRTL?(0,_objectSpread3.default)((0,_objectSpread3.default)({},_placements.placementsRtl),builtinPlacements):(0,_objectSpread3.default)((0,_objectSpread3.default)({},_placements.placements),
builtinPlacements);delete props.direction;builtinPlacements=this.getBaseProps();builtinPlacements=inline?null:this.getMotion(builtinPlacements.mode,builtinPlacements.visible);return React.createElement("li",(0,_extends2.default)({},props,_classNames2,{className:className,role:"menuitem"}),React.createElement(_rcTrigger.default,{prefixCls:prefixCls,popupClassName:(0,_classnames.default)("".concat(prefixCls,"-popup"),ariaOwns),getPopupContainer:style,builtinPlacements:isRTL,popupPlacement:_props$parentMenu,
popupVisible:inline?!1:visible,popupAlign:mergedMode,popup:inline?null:titleMouseEvents,action:_classNames3||inline?[]:[icon],mouseEnterDelay:subMenuOpenDelay,mouseLeaveDelay:subMenuCloseDelay,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:forceSubMenuRender,popupMotion:builtinPlacements},titleClickEvents),inline?titleMouseEvents:null)}}]);return SubMenu}(React.Component);exports.SubMenu=require;require.defaultProps={onMouseEnter:_util.noop,onMouseLeave:_util.noop,onTitleMouseEnter:_util.noop,
onTitleMouseLeave:_util.noop,onTitleClick:_util.noop,manualRef:_util.noop,mode:"vertical",title:""};require=(0,module.connect)(function(_ref2,_ref3){var activeKey=_ref2.activeKey,selectedKeys=_ref2.selectedKeys,eventKey=_ref3.eventKey;_ref3=_ref3.subMenuKey;return{isOpen:-1<_ref2.openKeys.indexOf(eventKey),active:activeKey[_ref3]===eventKey,selectedKeys:selectedKeys}})(require);require.isSubMenu=!0;exports.default=require}
//# sourceMappingURL=module$node_modules$rc_menu$lib$SubMenu.js.map
