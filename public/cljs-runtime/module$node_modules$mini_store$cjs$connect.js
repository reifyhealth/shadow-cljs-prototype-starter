shadow$provide.module$node_modules$mini_store$cjs$connect=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):
(__.prototype=b.prototype,new __)}}(),__assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)};global=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);result["default"]=mod;return result};
module=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod}};Object.defineProperty(exports,"__esModule",{value:!0});var React=global(require("module$node_modules$react$index")),shallowequal_1=module(require("module$node_modules$shallowequal$index")),hoist_non_react_statics_1=module(require("module$node_modules$hoist_non_react_statics$dist$hoist_non_react_statics_cjs")),Provider_1=require("module$node_modules$mini_store$cjs$Provider"),defaultMapStateToProps=function(){return{}};
exports.connect=function(mapStateToProps,options){void 0===options&&(options={});var shouldSubscribe=!!mapStateToProps,finalMapStateToProps=mapStateToProps||defaultMapStateToProps;return function(WrappedComponent){var Connect=function(_super){function Connect(props,context){var _this=_super.call(this,props,context)||this;_this.unsubscribe=null;_this.handleChange=function(){if(_this.unsubscribe){var nextState=finalMapStateToProps(_this.store.getState(),_this.props);_this.setState({subscribed:nextState})}};
_this.store=_this.context;_this.state={subscribed:finalMapStateToProps(_this.store.getState(),props),store:_this.store,props:props};return _this}__extends(Connect,_super);Connect.getDerivedStateFromProps=function(props,prevState){return mapStateToProps&&2===mapStateToProps.length&&props!==prevState.props?{subscribed:finalMapStateToProps(prevState.store.getState(),props),props:props}:{props:props}};Connect.prototype.componentDidMount=function(){this.trySubscribe()};Connect.prototype.componentWillUnmount=
function(){this.tryUnsubscribe()};Connect.prototype.shouldComponentUpdate=function(nextProps,nextState){return!shallowequal_1.default(this.props,nextProps)||!shallowequal_1.default(this.state.subscribed,nextState.subscribed)};Connect.prototype.trySubscribe=function(){shouldSubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange),this.handleChange())};Connect.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)};Connect.prototype.render=function(){var props=
__assign(__assign(__assign({},this.props),this.state.subscribed),{store:this.store});return React.createElement(WrappedComponent,__assign({},props,{ref:this.props.miniStoreForwardedRef}))};Connect.displayName="Connect("+(WrappedComponent.displayName||WrappedComponent.name||"Component")+")";Connect.contextType=Provider_1.MiniStoreContext;return Connect}(React.Component);if(options.forwardRef){var forwarded=React.forwardRef(function(props,ref){return React.createElement(Connect,__assign({},props,{miniStoreForwardedRef:ref}))});
return hoist_non_react_statics_1.default(forwarded,WrappedComponent)}return hoist_non_react_statics_1.default(Connect,WrappedComponent)}}}
//# sourceMappingURL=module$node_modules$mini_store$cjs$connect.js.map
