shadow$provide.module$node_modules$rc_trigger$lib$index=function(global,require,module,exports){function noop(){}function returnEmptyString(){return""}function returnDocument(element){return element?element.ownerDocument:window.document}function generateTrigger(PortalComponent){var Trigger=function(_React$Component){function Trigger(props){(0,_classCallCheck2.default)(this,Trigger);var _this=_super.call(this,props);_this.popupRef=React.createRef();_this.triggerRef=React.createRef();_this.onMouseEnter=
function(e){var mouseEnterDelay=_this.props.mouseEnterDelay;_this.fireEvents("onMouseEnter",e);_this.delaySetPopupVisible(!0,mouseEnterDelay,mouseEnterDelay?null:e)};_this.onMouseMove=function(e){_this.fireEvents("onMouseMove",e);_this.setPoint(e)};_this.onMouseLeave=function(e){_this.fireEvents("onMouseLeave",e);_this.delaySetPopupVisible(!1,_this.props.mouseLeaveDelay)};_this.onPopupMouseEnter=function(){_this.clearDelayTimer()};_this.onPopupMouseLeave=function(e){var _this$popupRef$curren;e.relatedTarget&&
!e.relatedTarget.setTimeout&&(0,_contains.default)(null===(_this$popupRef$curren=_this.popupRef.current)||void 0===_this$popupRef$curren?void 0:_this$popupRef$curren.getElement(),e.relatedTarget)||_this.delaySetPopupVisible(!1,_this.props.mouseLeaveDelay)};_this.onFocus=function(e){_this.fireEvents("onFocus",e);_this.clearDelayTimer();_this.isFocusToShow()&&(_this.focusTime=Date.now(),_this.delaySetPopupVisible(!0,_this.props.focusDelay))};_this.onMouseDown=function(e){_this.fireEvents("onMouseDown",
e);_this.preClickTime=Date.now()};_this.onTouchStart=function(e){_this.fireEvents("onTouchStart",e);_this.preTouchTime=Date.now()};_this.onBlur=function(e){_this.fireEvents("onBlur",e);_this.clearDelayTimer();_this.isBlurToHide()&&_this.delaySetPopupVisible(!1,_this.props.blurDelay)};_this.onContextMenu=function(e){e.preventDefault();_this.fireEvents("onContextMenu",e);_this.setPopupVisible(!0,e)};_this.onContextMenuClose=function(){_this.isContextMenuToShow()&&_this.close()};_this.onClick=function(event){_this.fireEvents("onClick",
event);if(_this.focusTime){if(_this.preClickTime&&_this.preTouchTime)var preTime=Math.min(_this.preClickTime,_this.preTouchTime);else _this.preClickTime?preTime=_this.preClickTime:_this.preTouchTime&&(preTime=_this.preTouchTime);if(20>Math.abs(preTime-_this.focusTime))return;_this.focusTime=0}_this.preClickTime=0;_this.preTouchTime=0;_this.isClickToShow()&&(_this.isClickToHide()||_this.isBlurToHide())&&event&&event.preventDefault&&event.preventDefault();preTime=!_this.state.popupVisible;(_this.isClickToHide()&&
!preTime||preTime&&_this.isClickToShow())&&_this.setPopupVisible(!_this.state.popupVisible,event)};_this.onPopupMouseDown=function(){_this.hasPopupMouseDown=!0;clearTimeout(_this.mouseDownTimeout);_this.mouseDownTimeout=window.setTimeout(function(){_this.hasPopupMouseDown=!1},0);if(_this.context){var _this$context;(_this$context=_this.context).onPopupMouseDown.apply(_this$context,arguments)}};_this.onDocumentClick=function(event){if(!_this.props.mask||_this.props.maskClosable){event=event.target;
var root=_this.getRootDomNode(),popupNode=_this.getPopupDomNode();(0,_contains.default)(root,event)||(0,_contains.default)(popupNode,event)||_this.hasPopupMouseDown||_this.close()}};_this.getRootDomNode=function(){var getTriggerDOMNode=_this.props.getTriggerDOMNode;if(getTriggerDOMNode)return getTriggerDOMNode(_this.triggerRef.current);try{var domNode=(0,_findDOMNode.default)(_this.triggerRef.current);if(domNode)return domNode}catch(err){}return _reactDom.default.findDOMNode((0,_assertThisInitialized2.default)(_this))};
_this.getPopupClassNameFromAlign=function(align){var className=[],_this$props=_this.props,builtinPlacements=_this$props.builtinPlacements,prefixCls=_this$props.prefixCls,alignPoint=_this$props.alignPoint,getPopupClassNameFromAlign=_this$props.getPopupClassNameFromAlign;_this$props.popupPlacement&&builtinPlacements&&className.push((0,_alignUtil.getAlignPopupClassName)(builtinPlacements,prefixCls,align,alignPoint));getPopupClassNameFromAlign&&className.push(getPopupClassNameFromAlign(align));return className.join(" ")};
_this.getComponent=function(){var _this$props2=_this.props,prefixCls=_this$props2.prefixCls,destroyPopupOnHide=_this$props2.destroyPopupOnHide,popupClassName=_this$props2.popupClassName,onPopupAlign=_this$props2.onPopupAlign,popupMotion=_this$props2.popupMotion,popupAnimation=_this$props2.popupAnimation,popupTransitionName=_this$props2.popupTransitionName,popupStyle=_this$props2.popupStyle,mask=_this$props2.mask,maskAnimation=_this$props2.maskAnimation,maskTransitionName=_this$props2.maskTransitionName,
maskMotion=_this$props2.maskMotion,zIndex=_this$props2.zIndex,popup=_this$props2.popup,stretch=_this$props2.stretch,alignPoint=_this$props2.alignPoint;_this$props2=_this$props2.mobile;var _this$state=_this.state,popupVisible=_this$state.popupVisible;_this$state=_this$state.point;var align=_this.getPopupAlign(),mouseProps={};_this.isMouseEnterToShow()&&(mouseProps.onMouseEnter=_this.onPopupMouseEnter);_this.isMouseLeaveToHide()&&(mouseProps.onMouseLeave=_this.onPopupMouseLeave);mouseProps.onMouseDown=
_this.onPopupMouseDown;mouseProps.onTouchStart=_this.onPopupMouseDown;return React.createElement(_Popup.default,(0,_extends2.default)({prefixCls:prefixCls,destroyPopupOnHide:destroyPopupOnHide,visible:popupVisible,point:alignPoint&&_this$state,className:popupClassName,align:align,onAlign:onPopupAlign,animation:popupAnimation,getClassNameFromAlign:_this.getPopupClassNameFromAlign},mouseProps,{stretch:stretch,getRootDomNode:_this.getRootDomNode,style:popupStyle,mask:mask,zIndex:zIndex,transitionName:popupTransitionName,
maskAnimation:maskAnimation,maskTransitionName:maskTransitionName,maskMotion:maskMotion,ref:_this.popupRef,motion:popupMotion,mobile:_this$props2}),"function"===typeof popup?popup():popup)};_this.attachParent=function(popupContainer){_raf.default.cancel(_this.attachId);var _this$props3=_this.props,getPopupContainer=_this$props3.getPopupContainer;_this$props3=_this$props3.getDocument;var domNode=_this.getRootDomNode();if(!getPopupContainer)var mountNode=_this$props3(_this.getRootDomNode()).body;else if(domNode||
0===getPopupContainer.length)mountNode=getPopupContainer(domNode);mountNode?mountNode.appendChild(popupContainer):_this.attachId=(0,_raf.default)(function(){_this.attachParent(popupContainer)})};_this.getContainer=function(){var getDocument=_this.props.getDocument;getDocument=getDocument(_this.getRootDomNode()).createElement("div");getDocument.style.position="absolute";getDocument.style.top="0";getDocument.style.left="0";getDocument.style.width="100%";_this.attachParent(getDocument);return getDocument};
_this.setPoint=function(point){_this.props.alignPoint&&point&&_this.setState({point:{pageX:point.pageX,pageY:point.pageY}})};_this.handlePortalUpdate=function(){_this.state.prevPopupVisible!==_this.state.popupVisible&&_this.props.afterPopupVisibleChange(_this.state.popupVisible)};props="popupVisible"in props?!!props.popupVisible:!!props.defaultPopupVisible;_this.state={prevPopupVisible:props,popupVisible:props};ALL_HANDLERS.forEach(function(h){_this["fire".concat(h)]=function(e){_this.fireEvents(h,
e)}});return _this}(0,_inherits2.default)(Trigger,_React$Component);var _super=(0,_createSuper2.default)(Trigger);(0,_createClass2.default)(Trigger,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var props=this.props;if(this.state.popupVisible){if(!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())){var currentDocument=props.getDocument(this.getRootDomNode());this.clickOutsideHandler=(0,_addEventListener.default)(currentDocument,
"mousedown",this.onDocumentClick)}this.touchOutsideHandler||(currentDocument=currentDocument||props.getDocument(this.getRootDomNode()),this.touchOutsideHandler=(0,_addEventListener.default)(currentDocument,"touchstart",this.onDocumentClick));!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(currentDocument=currentDocument||props.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=(0,_addEventListener.default)(currentDocument,"scroll",this.onContextMenuClose));!this.contextMenuOutsideHandler2&&
this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=(0,_addEventListener.default)(window,"blur",this.onContextMenuClose))}else this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer();this.clearOutsideHandler();clearTimeout(this.mouseDownTimeout);_raf.default.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var _this$popupRef$curren2;return(null===(_this$popupRef$curren2=this.popupRef.current)||void 0===_this$popupRef$curren2?void 0:
_this$popupRef$curren2.getElement())||null}},{key:"getPopupAlign",value:function(){var props=this.props,popupPlacement=props.popupPlacement,popupAlign=props.popupAlign;props=props.builtinPlacements;return popupPlacement&&props?(0,_alignUtil.getAlignFromPlacement)(props,popupPlacement,popupAlign):popupAlign}},{key:"setPopupVisible",value:function(popupVisible,event){var alignPoint=this.props.alignPoint,prevPopupVisible=this.state.popupVisible;this.clearDelayTimer();prevPopupVisible!==popupVisible&&
("popupVisible"in this.props||this.setState({popupVisible:popupVisible,prevPopupVisible:prevPopupVisible}),this.props.onPopupVisibleChange(popupVisible));alignPoint&&event&&popupVisible&&this.setPoint(event)}},{key:"delaySetPopupVisible",value:function(visible,delayS,event){var _this2=this;delayS*=1E3;this.clearDelayTimer();if(delayS){var point=event?{pageX:event.pageX,pageY:event.pageY}:null;this.delayTimer=window.setTimeout(function(){_this2.setPopupVisible(visible,point);_this2.clearDelayTimer()},
delayS)}else this.setPopupVisible(visible,event)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null);this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null);this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=
null);this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(event){var childPros=this.props.children.props,props=this.props;return childPros[event]&&props[event]?this["fire".concat(event)]:childPros[event]||props[event]}},{key:"isClickToShow",value:function(){var _this$props4=this.props,showAction=_this$props4.showAction;return-1!==_this$props4.action.indexOf("click")||-1!==showAction.indexOf("click")}},{key:"isContextMenuToShow",
value:function(){var _this$props5=this.props,showAction=_this$props5.showAction;return-1!==_this$props5.action.indexOf("contextMenu")||-1!==showAction.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var _this$props6=this.props,hideAction=_this$props6.hideAction;return-1!==_this$props6.action.indexOf("click")||-1!==hideAction.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var _this$props7=this.props,showAction=_this$props7.showAction;return-1!==_this$props7.action.indexOf("hover")||
-1!==showAction.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var _this$props8=this.props,hideAction=_this$props8.hideAction;return-1!==_this$props8.action.indexOf("hover")||-1!==hideAction.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var _this$props9=this.props,showAction=_this$props9.showAction;return-1!==_this$props9.action.indexOf("focus")||-1!==showAction.indexOf("focus")}},{key:"isBlurToHide",value:function(){var _this$props10=this.props,hideAction=_this$props10.hideAction;
return-1!==_this$props10.action.indexOf("focus")||-1!==hideAction.indexOf("blur")}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var _this$popupRef$curren3;null===(_this$popupRef$curren3=this.popupRef.current)||void 0===_this$popupRef$curren3?void 0:_this$popupRef$curren3.forceAlign()}}},{key:"fireEvents",value:function(type,e){var childCallback=this.props.children.props[type];childCallback&&childCallback(e);(type=this.props[type])&&type(e)}},{key:"close",value:function(){this.setPopupVisible(!1)}},
{key:"render",value:function(){var popupVisible=this.state.popupVisible,_this$props11=this.props,forceRender=_this$props11.forceRender,alignPoint=_this$props11.alignPoint,className=_this$props11.className,autoDestroy=_this$props11.autoDestroy;_this$props11=React.Children.only(_this$props11.children);var newChildProps={key:"trigger"};this.isContextMenuToShow()?newChildProps.onContextMenu=this.onContextMenu:newChildProps.onContextMenu=this.createTwoChains("onContextMenu");this.isClickToHide()||this.isClickToShow()?
(newChildProps.onClick=this.onClick,newChildProps.onMouseDown=this.onMouseDown,newChildProps.onTouchStart=this.onTouchStart):(newChildProps.onClick=this.createTwoChains("onClick"),newChildProps.onMouseDown=this.createTwoChains("onMouseDown"),newChildProps.onTouchStart=this.createTwoChains("onTouchStart"));this.isMouseEnterToShow()?(newChildProps.onMouseEnter=this.onMouseEnter,alignPoint&&(newChildProps.onMouseMove=this.onMouseMove)):newChildProps.onMouseEnter=this.createTwoChains("onMouseEnter");
this.isMouseLeaveToHide()?newChildProps.onMouseLeave=this.onMouseLeave:newChildProps.onMouseLeave=this.createTwoChains("onMouseLeave");this.isFocusToShow()||this.isBlurToHide()?(newChildProps.onFocus=this.onFocus,newChildProps.onBlur=this.onBlur):(newChildProps.onFocus=this.createTwoChains("onFocus"),newChildProps.onBlur=this.createTwoChains("onBlur"));if(alignPoint=(0,_classnames.default)(_this$props11&&_this$props11.props&&_this$props11.props.className,className))newChildProps.className=alignPoint;
alignPoint=(0,_objectSpread2.default)({},newChildProps);(0,_ref2.supportRef)(_this$props11)&&(alignPoint.ref=(0,_ref2.composeRef)(this.triggerRef,_this$props11.ref));_this$props11=React.cloneElement(_this$props11,alignPoint);if(popupVisible||this.popupRef.current||forceRender)var portal=React.createElement(PortalComponent,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent());!popupVisible&&autoDestroy&&(portal=null);return React.createElement(_context.default.Provider,
{value:{onPopupMouseDown:this.onPopupMouseDown}},_this$props11,portal)}}],[{key:"getDerivedStateFromProps",value:function(_ref,prevState){_ref=_ref.popupVisible;var newState={};void 0!==_ref&&prevState.popupVisible!==_ref&&(newState.popupVisible=_ref,newState.prevPopupVisible=prevState.popupVisible);return newState}}]);return Trigger}(React.Component);Trigger.contextType=_context.default;Trigger.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:returnEmptyString,getDocument:returnDocument,
onPopupVisibleChange:noop,afterPopupVisibleChange:noop,onPopupAlign:noop,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1};return Trigger}module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,
"__esModule",{value:!0});exports.generateTrigger=generateTrigger;exports.default=void 0;var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),
_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=global(require("module$node_modules$$babel$runtime$helpers$createSuper")),React=module(require("module$node_modules$react$index")),_reactDom=global(require("module$node_modules$react_dom$index")),_raf=global(require("module$node_modules$rc_util$lib$raf")),_contains=global(require("module$node_modules$rc_util$lib$Dom$contains")),_findDOMNode=global(require("module$node_modules$rc_util$lib$Dom$findDOMNode")),
_ref2=require("module$node_modules$rc_util$lib$ref"),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener"));module=global(require("module$node_modules$rc_util$lib$Portal"));var _classnames=global(require("module$node_modules$classnames$index")),_alignUtil=require("module$node_modules$rc_trigger$lib$utils$alignUtil"),_Popup=global(require("module$node_modules$rc_trigger$lib$Popup$index")),_context=global(require("module$node_modules$rc_trigger$lib$context")),ALL_HANDLERS=
"onClick onMouseDown onTouchStart onMouseEnter onMouseLeave onFocus onBlur onContextMenu".split(" ");require=generateTrigger(module.default);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_trigger$lib$index.js.map
